import{u as e,j as s}from"./data-vendor-C6mPcuPT.js";import{r as t}from"./react-vendor-C4Xey-hE.js";import{f as a,y as r}from"./index-DmOIf-MM.js";import"./ui-vendor-CMKyyIMz.js";import"./chart-vendor-Be69IwoK.js";function d(){var d;const[i,l]=t.useState("subscribers"),[x,n]=t.useState("month"),{data:c}=e({queryKey:["reports","subscribers"],queryFn:()=>r.get("/reports/subscribers").then(e=>e.data.data)}),{data:m}=e({queryKey:["reports","revenue",x],queryFn:()=>r.get("/reports/revenue",{params:{period:x}}).then(e=>e.data.data)}),{data:o}=e({queryKey:["reports","services"],queryFn:()=>r.get("/reports/services").then(e=>e.data.data)}),{data:h}=e({queryKey:["reports","resellers"],queryFn:()=>r.get("/reports/resellers").then(e=>e.data.data)}),{data:p}=e({queryKey:["reports","expiry"],queryFn:()=>r.get("/reports/expiry",{params:{days:7}}).then(e=>e.data.data)});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Reports"}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"subscribers",label:"Subscribers"},{id:"revenue",label:"Revenue"},{id:"services",label:"Services"},{id:"resellers",label:"Resellers"},{id:"expiry",label:"Expiry Report"}].map(e=>s.jsx("button",{onClick:()=>l(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(i===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})}),"subscribers"===i&&c&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Subscribers"}),s.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:c.total})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Active"}),s.jsx("p",{className:"text-3xl font-semibold text-green-600",children:c.active})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Expired"}),s.jsx("p",{className:"text-3xl font-semibold text-red-600",children:c.expired})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Online Now"}),s.jsx("p",{className:"text-3xl font-semibold text-blue-600",children:c.online})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"New This Month"}),s.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:c.newThisMonth})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Expiring Soon (7 days)"}),s.jsx("p",{className:"text-3xl font-semibold text-orange-600",children:c.expiringSoon})]})]})]}),"revenue"===i&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-2",children:["day","week","month","year"].map(e=>s.jsx("button",{onClick:()=>n(e),className:"px-4 py-2 rounded-md text-sm "+(x===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),m&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),s.jsxs("p",{className:"text-3xl font-semibold text-green-600",children:["$",null==(d=m.totalRevenue)?void 0:d.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Payments Count"}),s.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:m.paymentCount})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Avg Payment"}),s.jsxs("p",{className:"text-3xl font-semibold text-gray-900",children:["$",m.paymentCount?(m.totalRevenue/m.paymentCount).toFixed(2):"0.00"]})]})]}),m.byMethod&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue by Method"}),s.jsx("div",{className:"space-y-3",children:m.byMethod.map(e=>{var t;return s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600 capitalize",children:e.payment_method||"Unknown"}),s.jsxs("span",{className:"font-medium",children:["$",null==(t=e.amount)?void 0:t.toFixed(2)," (",e.count," payments)"]})]},e.payment_method)})})]})]})]}),"services"===i&&o&&s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subscribers"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>{var t;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.subscriber_count}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",null==(t=e.revenue)?void 0:t.toFixed(2)]})]},e.id)})})]})}),"resellers"===i&&h&&s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reseller"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Subscribers"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Active"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>{var t;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",null==(t=e.balance)?void 0:t.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.subscriber_count}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.active_count})]},e.id)})})]})}),"expiry"===i&&p&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[p.total," subscribers expiring in the next 7 days"]}),p.byDay&&s.jsx("div",{className:"grid grid-cols-7 gap-2",children:p.byDay.map(e=>s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded",children:[s.jsx("div",{className:"text-lg font-semibold text-orange-600",children:e.count}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Day ",e.day]})]},e.day))})]}),p.subscribers&&p.subscribers.length>0&&s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Username"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Full Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry Date"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.subscribers.slice(0,20).map(e=>{var t;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.username}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null==(t=e.service)?void 0:t.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a(e.expiry_date)})]},e.id)})})]})})]})]})}export{d as default};
