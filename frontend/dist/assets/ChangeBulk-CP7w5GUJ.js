import{u as e,d as r,j as a}from"./data-vendor-Gi89QHLZ.js";import{r as l}from"./react-vendor-C1B6conR.js";import{f as t,Z as s,i as d,g as i,e as o,a as n,D as c,F as u,m as g,_ as b,$ as m,a0 as x,c as h,j as y,a1 as p,O as v,d as f,x as k,S as j,k as w,r as N,n as _}from"./index-D8c4nYA2.js";import{u as S,f as C,a as A}from"./table-vendor-3gCiRijM.js";import{z as P}from"./ui-vendor-Bljr83Cq.js";import{F}from"./KeyIcon-BchGJZKf.js";import{F as E}from"./TrashIcon-BFqTFmN6.js";import{F as T,a as q,b as R}from"./FunnelIcon-DfkPDPOw.js";import"./chart-vendor-C_esy2x0.js";function D({title:e,titleId:r,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"}))}const O=l.forwardRef(D);function L({title:e,titleId:r,...a},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"}))}const M=l.forwardRef(L);function I(){var D,L;const[I,K]=l.useState({reseller_id:0,service_id:0,nas_id:0,status_filter:"all",online_filter:"all",fup_level_filter:"all",include_sub_resellers:!1}),[U,B]=l.useState(""),[Q,V]=l.useState(""),[$,G]=l.useState([]),[Z,z]=l.useState({field:"username",rule:"like",value:""}),[W,H]=l.useState(null),[Y,J]=l.useState(0),[X,ee]=l.useState(1),[re,ae]=l.useState(50),[le,te]=l.useState(!1),{data:se}=e({queryKey:["services"],queryFn:()=>w.list().then(e=>e.data.data||[])}),{data:de}=e({queryKey:["resellers"],queryFn:()=>N.list().then(e=>e.data.data||[])}),{data:ie}=e({queryKey:["nas"],queryFn:()=>_.list().then(e=>e.data.data||[])}),oe=r({mutationFn:e=>j.post(`/subscribers/change-bulk?page=${X}&limit=${re}`,{...e,preview:!0}),onSuccess:e=>{var r;H(e.data.data||[]),J((null==(r=e.data.meta)?void 0:r.total)||0)},onError:e=>{var r,a;return P.error((null==(a=null==(r=e.response)?void 0:r.data)?void 0:a.message)||"Failed to preview")}}),ne=r({mutationFn:e=>j.post("/subscribers/change-bulk",{...e,preview:!1}),onSuccess:e=>{P.success(e.data.message||"Bulk action completed successfully"),H(null),J(0),te(!1)},onError:e=>{var r,a;P.error((null==(a=null==(r=e.response)?void 0:r.data)?void 0:a.message)||"Failed to execute"),te(!1)}}),ce=()=>{Z.value.trim()&&(G([...$,{...Z}]),z({field:"username",rule:"like",value:""}))},ue=()=>{const e={...I,action:U,action_value:Q,filters:$};oe.mutate(e)},ge=l.useMemo(()=>[{accessorKey:"username",header:"Username"},{accessorKey:"full_name",header:"Name"},{accessorKey:"Reseller",header:"Reseller",cell:({row:e})=>{var r,a,l;return(null==(a=null==(r=e.original.Reseller)?void 0:r.User)?void 0:a.username)||(null==(l=e.original.Reseller)?void 0:l.name)||"-"}},{accessorKey:"Service",header:"Service",cell:({row:e})=>{var r;return(null==(r=e.original.Service)?void 0:r.name)||"-"}},{accessorKey:"Nas",header:"NAS",cell:({row:e})=>{var r;return(null==(r=e.original.Nas)?void 0:r.name)||"-"}},{accessorKey:"is_online",header:"Online",cell:({getValue:e})=>e()?a.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:"Online"}):a.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full",children:"Offline"})},{accessorKey:"status",header:"Status",cell:({getValue:e})=>"active"===e()?a.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:"Active"}):a.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Inactive"})},{accessorKey:"price",header:"Price",cell:({getValue:e})=>{var r;return`$${(null==(r=e())?void 0:r.toFixed(2))||"0.00"}`}},{accessorKey:"expiry_date",header:"Expiry",cell:({getValue:e})=>t(e())}],[]),be=S({data:W||[],columns:ge,getCoreRowModel:A()}),me=[{value:"",label:"Select an action...",icon:null,category:""},{value:"set_active",label:"Activate Subscribers",icon:s,category:"Status"},{value:"set_inactive",label:"Deactivate Subscribers",icon:O,category:"Status"},{value:"disconnect",label:"Disconnect (Kick Online)",icon:d,category:"Status"},{value:"set_expiry",label:"Set Expiry Date",icon:i,category:"Date"},{value:"add_days",label:"Add Days to Expiry",icon:o,category:"Date"},{value:"renew",label:"Renew (Reset + Add Days)",icon:n,category:"Date"},{value:"set_service",label:"Change Service",icon:M,category:"Assignment"},{value:"set_reseller",label:"Change Reseller",icon:c,category:"Assignment"},{value:"set_nas",label:"Change NAS",icon:u,category:"Assignment"},{value:"set_monthly_quota",label:"Set Monthly Quota (GB)",icon:g,category:"Quota"},{value:"set_daily_quota",label:"Set Daily Quota (MB)",icon:g,category:"Quota"},{value:"reset_fup",label:"Reset Daily FUP",icon:n,category:"Quota"},{value:"reset_monthly_fup",label:"Reset Monthly FUP",icon:n,category:"Quota"},{value:"reset_all_counters",label:"Reset All Counters",icon:n,category:"Quota"},{value:"set_price",label:"Set Price",icon:b,category:"Account"},{value:"set_password",label:"Set Password",icon:F,category:"Account"},{value:"set_static_ip",label:"Set Static IP",icon:u,category:"Account"},{value:"reset_mac",label:"Reset MAC Address",icon:n,category:"Account"},{value:"delete",label:"Delete Subscribers",icon:E,category:"Danger"}],xe=[{value:"username",label:"Username"},{value:"name",label:"Full Name"},{value:"address",label:"Address"},{value:"phone",label:"Phone"},{value:"expiry",label:"Expiry Date"},{value:"created",label:"Created Date"},{value:"price",label:"Price"},{value:"daily_usage",label:"Daily Usage (bytes)"},{value:"monthly_usage",label:"Monthly Usage (bytes)"}],he=[{value:"equal",label:"= Equal"},{value:"notequal",label:"≠ Not Equal"},{value:"greater",label:"> Greater Than"},{value:"less",label:"< Less Than"},{value:"like",label:"~ Contains"}],ye=l.useMemo(()=>{const e={};return me.forEach(r=>{r.category&&(e[r.category]||(e[r.category]=[]),e[r.category].push(r))}),e},[]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl text-white",children:a.jsx(m,{className:"w-6 h-6"})}),"Bulk Operations"]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Apply changes to multiple subscribers at once"})]}),Y>0&&a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg",children:[a.jsx(x,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),a.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-medium",children:[Y," subscribers selected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(T,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),"Filter Subscribers"]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Reseller"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.reseller_id,onChange:e=>K({...I,reseller_id:parseInt(e.target.value)}),children:[a.jsx("option",{value:0,children:"All Resellers"}),null==de?void 0:de.map(e=>{var r;return a.jsx("option",{value:e.id,children:(null==(r=e.User)?void 0:r.username)||e.name},e.id)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Service"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.service_id,onChange:e=>K({...I,service_id:parseInt(e.target.value)}),children:[a.jsx("option",{value:0,children:"All Services"}),null==se?void 0:se.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"NAS / Router"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.nas_id,onChange:e=>K({...I,nas_id:parseInt(e.target.value)}),children:[a.jsx("option",{value:0,children:"All NAS"}),null==ie?void 0:ie.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Status"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.status_filter,onChange:e=>K({...I,status_filter:e.target.value}),children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"inactive",children:"Inactive Only"}),a.jsx("option",{value:"active_inactive",children:"Active & Inactive"}),a.jsx("option",{value:"expired",children:"Expired Only"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Online Status"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.online_filter,onChange:e=>K({...I,online_filter:e.target.value}),children:[a.jsx("option",{value:"all",children:"All (Online & Offline)"}),a.jsx("option",{value:"online",children:"Online Only"}),a.jsx("option",{value:"offline",children:"Offline Only"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"FUP Level"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:I.fup_level_filter,onChange:e=>K({...I,fup_level_filter:e.target.value}),children:[a.jsx("option",{value:"all",children:"All FUP Levels"}),a.jsx("option",{value:"0",children:"Level 0 (Full Speed)"}),a.jsx("option",{value:"1",children:"Level 1"}),a.jsx("option",{value:"2",children:"Level 2"}),a.jsx("option",{value:"3",children:"Level 3 (Lowest)"})]})]}),a.jsx("div",{className:"flex items-center md:col-span-2 lg:col-span-3",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:I.include_sub_resellers,onChange:e=>K({...I,include_sub_resellers:e.target.checked})}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),a.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include Sub-resellers"})]})})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(m,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),"Advanced Filters"]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex gap-3 items-end flex-wrap",children:[a.jsxs("div",{className:"flex-1 min-w-[140px]",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Field"}),a.jsx("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",value:Z.field,onChange:e=>z({...Z,field:e.target.value}),children:xe.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),a.jsxs("div",{className:"flex-1 min-w-[140px]",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Condition"}),a.jsx("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",value:Z.rule,onChange:e=>z({...Z,rule:e.target.value}),children:he.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),a.jsxs("div",{className:"flex-1 min-w-[160px]",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Value"}),a.jsx("input",{type:"text",className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",value:Z.value,onChange:e=>z({...Z,value:e.target.value}),placeholder:"Enter value...",onKeyDown:e=>"Enter"===e.key&&ce()})]}),a.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(h,{className:"w-4 h-4"}),"Add"]})]}),$.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Active filters:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$.map((e,r)=>{var l,t;return a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 border border-blue-200 dark:border-blue-700 rounded-full text-sm",children:[a.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:null==(l=xe.find(r=>r.value===e.field))?void 0:l.label}),a.jsx("span",{className:"text-blue-400 dark:text-blue-500",children:null==(t=he.find(r=>r.value===e.rule))?void 0:t.label.split(" ")[0]}),a.jsxs("span",{className:"font-semibold text-blue-900 dark:text-blue-200",children:['"',e.value,'"']}),a.jsx("button",{onClick:()=>{return e=r,void G($.filter((r,a)=>a!==e));var e},className:"ml-1 text-blue-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:a.jsx(y,{className:"w-4 h-4"})})]},r)})})]})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden sticky top-6",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/30 dark:to-indigo-900/30 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5 text-purple-500"}),"Action to Perform"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Action"}),a.jsxs("select",{className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-purple-500 focus:ring-purple-500",value:U,onChange:e=>{B(e.target.value),V("")},children:[a.jsx("option",{value:"",children:"Select an action..."}),Object.entries(ye).map(([e,r])=>a.jsx("optgroup",{label:`── ${e} ──`,children:r.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))},e))]})]}),U&&!["set_active","set_inactive","reset_mac","disconnect","reset_fup","reset_monthly_fup","reset_all_counters","delete"].includes(U)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:null==(D=me.find(e=>e.value===U))?void 0:D.label}),(()=>{switch(U){case"set_expiry":return a.jsx("input",{type:"date",className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Q,onChange:e=>V(e.target.value)});case"set_service":return a.jsxs("select",{className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Q,onChange:e=>V(e.target.value),children:[a.jsx("option",{value:"",children:"Select service..."}),null==se?void 0:se.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]});case"set_reseller":return a.jsxs("select",{className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Q,onChange:e=>V(e.target.value),children:[a.jsx("option",{value:"",children:"Select reseller..."}),null==de?void 0:de.map(e=>{var r;return a.jsx("option",{value:e.id,children:(null==(r=e.User)?void 0:r.username)||e.name},e.id)})]});case"set_nas":return a.jsxs("select",{className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",value:Q,onChange:e=>V(e.target.value),children:[a.jsx("option",{value:"",children:"Select NAS..."}),null==ie?void 0:ie.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.ip_address,")"]},e.id))]});case"set_monthly_quota":return a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{type:"number",className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-12",placeholder:"Enter quota",value:Q,onChange:e=>V(e.target.value)}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm",children:"GB"})]});case"set_daily_quota":return a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{type:"number",className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-12",placeholder:"Enter quota",value:Q,onChange:e=>V(e.target.value)}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm",children:"MB"})]});case"set_price":return a.jsxs("div",{className:"relative mt-1",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),a.jsx("input",{type:"number",step:"0.01",className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 pl-7",placeholder:"0.00",value:Q,onChange:e=>V(e.target.value)})]});case"renew":case"add_days":return a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{type:"number",className:"block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-16",placeholder:"30",value:Q,onChange:e=>V(e.target.value)}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 text-sm",children:"days"})]});case"set_password":return a.jsx("input",{type:"text",className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"New password",value:Q,onChange:e=>V(e.target.value)});case"set_static_ip":return a.jsx("input",{type:"text",className:"mt-1 block w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"10.0.0.100 (leave empty to remove)",value:Q,onChange:e=>V(e.target.value)});default:return null}})()]}),U&&a.jsx("div",{className:"p-3 rounded-lg border "+("delete"===U?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700":"bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-700"),children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(v,{className:"w-5 h-5 flex-shrink-0 mt-0.5 "+("delete"===U?"text-red-500 dark:text-red-400":"text-amber-500 dark:text-amber-400")}),a.jsx("p",{className:"text-sm "+("delete"===U?"text-red-700 dark:text-red-300":"text-amber-700 dark:text-amber-300"),children:{set_active:"This will activate all matching subscribers.",set_inactive:"This will deactivate all matching subscribers.",disconnect:"This will disconnect all online matching subscribers from the network.",set_expiry:"This will update the expiry date for all matching subscribers.",add_days:"This will add the specified number of days to each subscriber's current expiry date.",renew:"This will reset FUP counters and extend expiry by the specified days (default 30).",set_service:"This will change the service plan for all matching subscribers.",set_reseller:"This will transfer all matching subscribers to another reseller.",set_nas:"This will assign a new NAS to all matching subscribers.",set_monthly_quota:"This will set the monthly quota limit for all matching subscribers.",set_daily_quota:"This will set the daily quota limit for all matching subscribers.",reset_fup:"This will reset daily FUP level and counters for all matching subscribers.",reset_monthly_fup:"This will reset monthly FUP level and counters for all matching subscribers.",reset_all_counters:"This will reset ALL usage counters (daily + monthly) for all matching subscribers.",set_price:"This will update the price for all matching subscribers.",set_password:"This will set a new password for all matching subscribers.",set_static_ip:"This will set or remove static IP for all matching subscribers.",reset_mac:"This will reset the MAC address binding for all matching subscribers.",delete:"⚠️ DANGER: This will permanently delete all matching subscribers!"}[U]||""})]})}),a.jsxs("div",{className:"pt-4 space-y-3",children:[a.jsxs("button",{onClick:ue,disabled:oe.isPending,className:"w-full px-4 py-2.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50",children:[a.jsx(f,{className:"w-5 h-5"}),oe.isPending?"Loading Preview...":"Preview Changes"]}),a.jsxs("button",{onClick:()=>{if(!U)return void P.error("Please select an action");!["set_expiry","set_service","set_reseller","set_monthly_quota","set_daily_quota","set_price","renew","add_days","set_nas","set_password","set_static_ip"].includes(U)||Q?te(!0):P.error("Please enter a value for the action")},disabled:!U||ne.isPending,className:"w-full px-4 py-2.5 text-white rounded-lg transition-all flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed shadow-lg "+("delete"===U?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-red-500/25":"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 shadow-purple-500/25"),children:[(()=>{const e=me.find(e=>e.value===U);if(null==e?void 0:e.icon){const r=e.icon;return a.jsx(r,{className:"w-5 h-5"})}return a.jsx(p,{className:"w-5 h-5"})})(),ne.isPending?"Executing...":"Execute Action"]})]})]})]})})]}),W&&W.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(k,{className:"w-5 h-5 text-green-500 dark:text-green-400"}),"Preview Results",a.jsxs("span",{className:"ml-2 px-2.5 py-0.5 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 rounded-full text-sm font-medium",children:[Y," subscribers"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rows per page:"}),a.jsxs("select",{className:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm py-1",value:re,onChange:e=>{ae(parseInt(e.target.value)),ee(1)},children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:30,children:"30"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:be.getHeaderGroups().map(e=>a.jsx("tr",{children:e.headers.map(e=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:C(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:be.getRowModel().rows.map((e,r)=>a.jsx("tr",{className:r%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-750",children:e.getVisibleCells().map(e=>a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:C(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),Y>re&&a.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(X-1)*re+1," to ",Math.min(X*re,Y)," of ",Y," results"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",disabled:1===X,onClick:()=>{ee(X-1),setTimeout(ue,0)},children:[a.jsx(q,{className:"w-4 h-4"}),"Previous"]}),a.jsxs("span",{className:"px-4 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300",children:["Page ",X," of ",Math.ceil(Y/re)]}),a.jsxs("button",{className:"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",disabled:X>=Math.ceil(Y/re),onClick:()=>{ee(X+1),setTimeout(ue,0)},children:["Next",a.jsx(R,{className:"w-4 h-4"})]})]})]})]}),W&&0===W.length&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center",children:[a.jsx(x,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No subscribers found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your filters to match more subscribers."})]}),le&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b "+("delete"===U?"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30 border-red-200 dark:border-red-700":"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 border-amber-200 dark:border-amber-700"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-full "+("delete"===U?"bg-red-100 dark:bg-red-900/50":"bg-amber-100 dark:bg-amber-900/50"),children:a.jsx(v,{className:"w-6 h-6 "+("delete"===U?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400")})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Confirm Bulk Action"})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["You are about to perform ",a.jsxs("span",{className:"font-semibold "+("delete"===U?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:['"',null==(L=me.find(e=>e.value===U))?void 0:L.label,'"']})," on",a.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:[" ",Y||"all matching"," subscribers"]}),"."]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This action cannot be undone. Are you sure you want to continue?"})]}),a.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex gap-3 justify-end",children:[a.jsx("button",{onClick:()=>te(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 font-medium",children:"Cancel"}),a.jsx("button",{onClick:()=>{const e={...I,action:U,action_value:Q,filters:$};ne.mutate(e)},disabled:ne.isPending,className:"px-4 py-2 text-white rounded-lg font-medium disabled:opacity-50 flex items-center gap-2 "+("delete"===U?"bg-red-600 hover:bg-red-700":"bg-purple-600 hover:bg-purple-700"),children:ne.isPending?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Executing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(s,{className:"w-4 h-4"}),"Yes, Execute"]})})]})]})})]})}export{I as default};
