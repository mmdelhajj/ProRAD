import{b as e,u as a,d as r,j as t}from"./data-vendor-C6mPcuPT.js";import{r as s,f as l}from"./react-vendor-C4Xey-hE.js";import{u as d,H as n,I as i,z as o,J as c}from"./index-AEbNSw2x.js";import{z as m}from"./ui-vendor-CMKyyIMz.js";import{F as g}from"./TrashIcon-BFZdbUYd.js";import"./chart-vendor-Be69IwoK.js";function x({title:e,titleId:a,...r},t){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const u=s.forwardRef(x);function b({title:e,titleId:a,...r},t){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const h=s.forwardRef(b);function y(){var x,b;const y=e(),{user:p,refreshUser:v}=d(),{companyName:k,companyLogo:f,loginBackground:j,favicon:w,footerText:N,primaryColor:_,fetchBranding:C,updateBranding:S}=n(),[F,P]=l(),A=["branding","general","billing","service_change","radius","notifications","security","account","license"],L=F.get("tab"),M=L&&A.includes(L)?L:"branding",[T,D]=s.useState(M);s.useEffect(()=>{const e=F.get("tab");e&&A.includes(e)&&e!==T&&D(e)},[F]);const[I,B]=s.useState({}),[U,E]=s.useState(!1),R=s.useRef(null),z=s.useRef(null),Y=s.useRef(null),[W,q]=s.useState(!1),[G,V]=s.useState(!1),[H,$]=s.useState(!1),[O,Q]=s.useState(null),[K,X]=s.useState(""),[J,Z]=s.useState(""),[ee,ae]=s.useState(""),[re,te]=s.useState(!1),[se,le]=s.useState(!1),[de,ne]=s.useState(!1),[ie,oe]=s.useState(""),[ce,me]=s.useState(""),{data:ge,isLoading:xe}=a({queryKey:["settings"],queryFn:()=>o.get("/settings").then(e=>e.data.items||[])}),{data:ue}=a({queryKey:["timezones"],queryFn:()=>o.get("/settings/timezones").then(e=>e.data.data||[])});s.useEffect(()=>{if(ge){const e={};ge.forEach(a=>{e[a.key]=a.value}),B(e),E(!1)}},[ge]);const be=r({mutationFn:e=>o.put("/settings/bulk",{settings:e}),onSuccess:()=>{y.invalidateQueries(["settings"]),E(!1),I.system_timezone&&c(I.system_timezone),m.success("Settings saved successfully")}}),{data:he,refetch:ye}=a({queryKey:["2fa-status"],queryFn:()=>o.get("/auth/2fa/status").then(e=>e.data.data),enabled:"account"===T}),pe=r({mutationFn:()=>o.post("/auth/2fa/setup"),onSuccess:e=>{Q(e.data.data)},onError:e=>{var a,r;m.error((null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.message)||"Failed to setup 2FA")}}),ve=r({mutationFn:e=>o.post("/auth/2fa/verify",{code:e}),onSuccess:()=>{m.success("2FA enabled successfully!"),Q(null),X(""),ye(),v()},onError:e=>{var a,r;m.error((null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.message)||"Invalid code")}}),ke=r({mutationFn:e=>o.post("/auth/2fa/disable",e),onSuccess:()=>{m.success("2FA disabled successfully"),Z(""),ae(""),ye(),v()},onError:e=>{var a,r;m.error((null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.message)||"Failed to disable 2FA")}}),fe=(e,a)=>{B(r=>({...r,[e]:a})),E(!0)},je=()=>{const e=Object.entries(I).map(([e,a])=>({key:e,value:String(a)}));be.mutate(e)},{data:we,isLoading:Ne,refetch:_e}=a({queryKey:["license",T],queryFn:()=>o.get("/license").then(e=>e.data.data),enabled:"license"===T,staleTime:0,refetchOnMount:"always"}),{data:Ce,refetch:Se}=a({queryKey:["license-status-detail",T],queryFn:()=>o.get("/license/status").then(e=>e.data),enabled:"license"===T,staleTime:0,refetchOnMount:"always"}),Fe=r({mutationFn:()=>o.post("/license/revalidate"),onSuccess:e=>{e.data.success?m.success("License validated successfully"):m.error(e.data.message||"License validation failed"),_e(),Se(),y.invalidateQueries(["license-status"])},onError:e=>{var a,r;m.error((null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.message)||"Failed to validate license")}}),{data:Pe,refetch:Ae,isLoading:Le}=a({queryKey:["system-update-check",T],queryFn:()=>o.get("/system/update/check").then(e=>e.data),enabled:"license"===T,staleTime:0,refetchOnMount:"always"}),Me=r({mutationFn:()=>o.get("/system/update/check").then(e=>e.data),onSuccess:e=>{e.update_available?m.success(`Update available: v${e.new_version}`):m.success("You are running the latest version"),y.invalidateQueries(["system-update-check"])},onError:e=>{var a,r;m.error((null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.message)||"Failed to check for updates")}});if(xe)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const Te=e=>{const a=I[e.key]||"";if("toggle"===e.type){const r="true"===a||"1"===a||!0===a;return t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:()=>fe(e.key,r?"false":"true"),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(r?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"),children:t.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-800 shadow ring-0 transition duration-200 ease-in-out "+(r?"translate-x-5":"translate-x-0")})}),e.description&&t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]})}return"timezone"===e.type?t.jsxs("div",{children:[t.jsxs("select",{value:a,onChange:a=>fe(e.key,a.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"Select timezone..."}),(ue||[]).map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]}),e.description&&t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]}):"select"===e.type?t.jsxs("select",{value:a,onChange:a=>fe(e.key,a.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"Select..."}),e.options.map(e=>t.jsx("option",{value:e,children:e},e))]}):"textarea"===e.type?t.jsx("textarea",{value:a,onChange:a=>fe(e.key,a.target.value),placeholder:e.placeholder,rows:3,className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}):t.jsxs("div",{children:[t.jsx("input",{type:e.type,value:a,onChange:a=>fe(e.key,a.target.value),placeholder:e.placeholder,step:"number"===e.type?"0.01":void 0,className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.description&&t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Settings"}),t.jsxs("div",{className:"flex space-x-3",children:[U&&t.jsx("button",{onClick:()=>{if(ge){const e={};ge.forEach(a=>{e[a.key]=a.value}),B(e),E(!1)}},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:bg-gray-700",children:"Reset"}),t.jsx("button",{onClick:je,disabled:!U||be.isPending,className:"px-4 py-2 text-sm font-medium text-white rounded-md "+(U?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:be.isPending?"Saving...":"Save Changes"})]})]}),be.isSuccess&&t.jsx("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 text-green-700 px-4 py-3 rounded",children:"Settings saved successfully!"}),be.isError&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Failed to save settings. Please try again."}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"flex -mb-px",children:[{id:"branding",label:"Branding"},{id:"general",label:"General"},{id:"billing",label:"Billing"},{id:"service_change",label:"Service Change"},{id:"radius",label:"RADIUS"},{id:"notifications",label:"Notifications"},{id:"security",label:"Security"},{id:"account",label:"My Account"},{id:"license",label:"License"}].map(e=>t.jsx("button",{onClick:()=>{return a=e.id,D(a),void P({tab:a},{replace:!0});var a},className:"px-6 py-4 text-sm font-medium border-b-2 "+(T===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300"),children:e.label},e.id))})}),t.jsx("div",{className:"p-6",children:"branding"===T?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name"}),t.jsx("input",{type:"text",value:I.company_name||"",onChange:e=>fe("company_name",e.target.value),placeholder:"Your Company Name",className:"block w-full max-w-md rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This name appears in the sidebar and login page"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Logo"}),t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gray-50 dark:bg-gray-700 overflow-hidden",children:f?t.jsx("img",{src:f,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):t.jsx(u,{className:"w-12 h-12 text-gray-400"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{ref:R,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml,image/webp",onChange:async e=>{var a,r,t;const s=null==(a=e.target.files)?void 0:a[0];if(!s)return;if(!["image/png","image/jpeg","image/jpg","image/svg+xml","image/webp"].includes(s.type))return void m.error("Invalid file type. Use PNG, JPG, SVG, or WEBP");if(s.size>2097152)return void m.error("File too large. Maximum size is 2MB");q(!0);const l=new FormData;l.append("logo",s);try{const e=await i.uploadLogo(l);e.data.success&&(m.success("Logo uploaded successfully"),S({company_logo:e.data.data.url}),y.invalidateQueries(["settings"]))}catch(d){m.error((null==(t=null==(r=d.response)?void 0:r.data)?void 0:t.message)||"Failed to upload logo")}finally{q(!1),R.current&&(R.current.value="")}},className:"hidden"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=R.current)?void 0:e.click()},disabled:W,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),W?"Uploading...":"Upload Logo"]}),f&&t.jsxs("button",{type:"button",onClick:async()=>{if(f)try{await i.deleteLogo(),m.success("Logo deleted"),S({company_logo:""}),y.invalidateQueries(["settings"])}catch(e){m.error("Failed to delete logo")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[t.jsx(g,{className:"w-4 h-4 mr-2"}),"Remove Logo"]})]}),t.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",t.jsx("strong",{children:"180 x 36 pixels"})," (horizontal logo). PNG with transparent background, max 2MB."]})]})]})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(h,{className:"w-4 h-4 inline mr-1"}),"Primary Color"]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"color",value:I.primary_color||"#2563eb",onChange:e=>fe("primary_color",e.target.value),className:"w-16 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),t.jsx("input",{type:"text",value:I.primary_color||"#2563eb",onChange:e=>fe("primary_color",e.target.value),placeholder:"#2563eb",className:"w-32 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("div",{className:"flex gap-2",children:["#2563eb","#10b981","#8b5cf6","#f59e0b","#ef4444","#06b6d4"].map(e=>t.jsx("button",{type:"button",onClick:()=>fe("primary_color",e),className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-600 shadow-sm hover:scale-110 transition-transform",style:{backgroundColor:e},title:e},e))})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used for buttons, links, and accent elements throughout the app"})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Login Page Background"}),t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-48 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-800 overflow-hidden",children:j?t.jsx("img",{src:j,alt:"Login Background",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-white text-xs",children:"Default Gradient"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{ref:z,type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:async e=>{var a,r,t;const s=null==(a=e.target.files)?void 0:a[0];if(!s)return;if(s.size>5242880)return void m.error("File too large. Maximum size is 5MB");V(!0);const l=new FormData;l.append("background",s);try{const e=await i.uploadLoginBackground(l);e.data.success&&(m.success("Login background uploaded successfully"),S({login_background:e.data.data.url}),y.invalidateQueries(["settings"]))}catch(d){m.error((null==(t=null==(r=d.response)?void 0:r.data)?void 0:t.message)||"Failed to upload background")}finally{V(!1),z.current&&(z.current.value="")}},className:"hidden"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=z.current)?void 0:e.click()},disabled:G,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),G?"Uploading...":"Upload Background"]}),j&&t.jsxs("button",{type:"button",onClick:async()=>{if(j)try{await i.deleteLoginBackground(),m.success("Login background deleted"),S({login_background:""}),y.invalidateQueries(["settings"])}catch(e){m.error("Failed to delete background")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[t.jsx(g,{className:"w-4 h-4 mr-2"}),"Use Default Gradient"]})]}),t.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",t.jsx("strong",{children:"1920 x 1080 pixels"}),". JPG or PNG, max 5MB.",t.jsx("br",{}),"This image appears on the left side of the login page."]})]})]})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Favicon (Browser Tab Icon)"}),t.jsxs("div",{className:"flex items-start gap-6",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gray-50 dark:bg-gray-700 overflow-hidden",children:w?t.jsx("img",{src:w,alt:"Favicon",className:"w-8 h-8 object-contain"}):t.jsx("span",{className:"text-gray-400 text-xl",children:"ðŸŒ"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{ref:Y,type:"file",accept:"image/png,image/x-icon,image/svg+xml",onChange:async e=>{var a,r,t;const s=null==(a=e.target.files)?void 0:a[0];if(!s)return;if(s.size>512e3)return void m.error("File too large. Maximum size is 500KB");$(!0);const l=new FormData;l.append("favicon",s);try{const e=await i.uploadFavicon(l);e.data.success&&(m.success("Favicon uploaded successfully"),S({favicon:e.data.data.url}),y.invalidateQueries(["settings"]))}catch(d){m.error((null==(t=null==(r=d.response)?void 0:r.data)?void 0:t.message)||"Failed to upload favicon")}finally{$(!1),Y.current&&(Y.current.value="")}},className:"hidden"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=Y.current)?void 0:e.click()},disabled:H,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[t.jsx(u,{className:"w-4 h-4 mr-2"}),H?"Uploading...":"Upload Favicon"]}),w&&t.jsxs("button",{type:"button",onClick:async()=>{if(w)try{await i.deleteFavicon(),m.success("Favicon deleted"),S({favicon:""}),y.invalidateQueries(["settings"])}catch(e){m.error("Failed to delete favicon")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[t.jsx(g,{className:"w-4 h-4 mr-2"}),"Remove Favicon"]})]}),t.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",t.jsx("strong",{children:"32 x 32 pixels"}),". PNG, ICO, or SVG, max 500KB."]})]})]})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Footer Copyright Text"}),t.jsx("input",{type:"text",value:I.footer_text||"",onChange:e=>fe("footer_text",e.target.value),placeholder:"Â© 2026 Your Company Name. All rights reserved.",className:"block w-full max-w-lg rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Appears at the bottom of the login page"})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Login Page Features"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Tagline (bottom of left panel)"}),t.jsx("input",{type:"text",value:I.login_tagline||"",onChange:e=>fe("login_tagline",e.target.value),placeholder:"High Performance ISP Management Solution",className:"block w-full max-w-lg rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",checked:"false"!==I.show_login_features,onChange:e=>fe("show_login_features",e.target.checked?"true":"false"),className:"sr-only"}),t.jsx("div",{className:"w-10 h-6 rounded-full transition-colors "+("false"!==I.show_login_features?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"),children:t.jsx("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform "+("false"!==I.show_login_features?"translate-x-5":"translate-x-1")})})]}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show feature boxes on login page"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 1 Title"}),t.jsx("input",{type:"text",value:I.login_feature_1_title||"",onChange:e=>fe("login_feature_1_title",e.target.value),placeholder:"PPPoE Management",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 1 Description"}),t.jsx("input",{type:"text",value:I.login_feature_1_desc||"",onChange:e=>fe("login_feature_1_desc",e.target.value),placeholder:"Complete subscriber and session management...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 2 Title"}),t.jsx("input",{type:"text",value:I.login_feature_2_title||"",onChange:e=>fe("login_feature_2_title",e.target.value),placeholder:"Bandwidth Control",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 2 Description"}),t.jsx("input",{type:"text",value:I.login_feature_2_desc||"",onChange:e=>fe("login_feature_2_desc",e.target.value),placeholder:"FUP quotas, time-based speed control...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 3 Title"}),t.jsx("input",{type:"text",value:I.login_feature_3_title||"",onChange:e=>fe("login_feature_3_title",e.target.value),placeholder:"MikroTik Integration",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 3 Description"}),t.jsx("input",{type:"text",value:I.login_feature_3_desc||"",onChange:e=>fe("login_feature_3_desc",e.target.value),placeholder:"Seamless RADIUS and API integration...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]})]}),t.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Sidebar Preview"}),t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 max-w-xs",children:t.jsx("div",{className:"flex items-center gap-3",children:f?t.jsx("img",{src:f,alt:"Logo",className:"h-10 object-contain"}):t.jsx("span",{className:"text-lg font-bold",style:{color:I.primary_color||"#2563eb"},children:I.company_name||"Your Company Name"})})})})]})]}):"account"===T?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Account Information"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Username"}),t.jsx("p",{className:"font-medium",children:null==p?void 0:p.username})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),t.jsx("p",{className:"font-medium",children:(null==p?void 0:p.email)||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Full Name"}),t.jsx("p",{className:"font-medium",children:(null==p?void 0:p.full_name)||"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Role"}),t.jsx("p",{className:"font-medium capitalize",children:null==p?void 0:p.user_type})]})]})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Two-Factor Authentication"}),(null==he?void 0:he.enabled)?t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),t.jsx("span",{className:"font-medium text-green-800",children:"2FA is enabled"})]}),t.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Your account is protected with two-factor authentication."}),t.jsxs("div",{className:"border-t border-green-200 pt-4 mt-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Disable 2FA"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"password",placeholder:"Current password",value:J,onChange:e=>Z(e.target.value),className:"block w-full max-w-xs rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("input",{type:"text",placeholder:"2FA code",value:ee,onChange:e=>ae(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"block w-full max-w-xs rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("button",{onClick:()=>ke.mutate({password:J,code:ee}),disabled:ke.isPending||!J||6!==ee.length,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50",children:ke.isPending?"Disabling...":"Disable 2FA"})]})]})]}):O?t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-4",children:"Setup Two-Factor Authentication"}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"1. Scan this QR code with your authenticator app"}),t.jsx("img",{src:O.qr_code,alt:"2FA QR Code",className:"w-48 h-48 border rounded"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Or enter this code manually:"}),t.jsx("code",{className:"block bg-white px-3 py-2 rounded border text-sm font-mono mb-4 break-all",children:O.secret}),t.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"2. Enter the 6-digit code from your app:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"000000",value:K,onChange:e=>X(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"block w-32 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-center text-lg tracking-widest"}),t.jsx("button",{onClick:()=>ve.mutate(K),disabled:ve.isPending||6!==K.length,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:ve.isPending?"Verifying...":"Verify & Enable"})]})]})]}),t.jsx("button",{onClick:()=>{Q(null),X("")},className:"mt-4 text-sm text-blue-600 hover:text-blue-800",children:"Cancel setup"})]}):t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"2FA is not enabled"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add an extra layer of security to your account by enabling two-factor authentication. You'll need an authenticator app like Google Authenticator or Authy."}),t.jsx("button",{onClick:()=>pe.mutate(),disabled:pe.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:pe.isPending?"Setting up...":"Enable 2FA"})]})]})]}):"notifications"===T?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Email Notifications (SMTP)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Host"}),t.jsx("input",{type:"text",value:I.smtp_host||"",onChange:e=>fe("smtp_host",e.target.value),placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Port"}),t.jsx("input",{type:"number",value:I.smtp_port||"",onChange:e=>fe("smtp_port",e.target.value),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Username"}),t.jsx("input",{type:"text",value:I.smtp_username||"",onChange:e=>fe("smtp_username",e.target.value),placeholder:"user@gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Password"}),t.jsx("input",{type:"password",value:I.smtp_password||"",onChange:e=>fe("smtp_password",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Name"}),t.jsx("input",{type:"text",value:I.smtp_from_name||"",onChange:e=>fe("smtp_from_name",e.target.value),placeholder:"Company Name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Email"}),t.jsx("input",{type:"email",value:I.smtp_from_email||"",onChange:e=>fe("smtp_from_email",e.target.value),placeholder:"noreply@company.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Email Address"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"email",value:ie,onChange:e=>oe(e.target.value),placeholder:"test@example.com",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),t.jsx("button",{onClick:async()=>{var e,a;te(!0);try{const e=await o.post("/notifications/test-smtp",{smtp_host:I.smtp_host,smtp_port:I.smtp_port,smtp_username:I.smtp_username,smtp_password:I.smtp_password,smtp_from_name:I.smtp_from_name,smtp_from_email:I.smtp_from_email,test_email:ie||I.notification_email});m.success(e.data.message||"SMTP test successful!")}catch(r){m.error((null==(a=null==(e=r.response)?void 0:e.data)?void 0:a.message)||"SMTP test failed")}finally{te(!1)}},disabled:re||!I.smtp_host,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:re?"Testing...":"Test SMTP"})]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"SMS Notifications"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMS Provider"}),t.jsxs("select",{value:I.sms_provider||"",onChange:e=>fe("sms_provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[t.jsx("option",{value:"",children:"Select Provider"}),t.jsx("option",{value:"twilio",children:"Twilio"}),t.jsx("option",{value:"vonage",children:"Vonage (Nexmo)"}),t.jsx("option",{value:"custom",children:"Custom API"})]})]}),"twilio"===I.sms_provider&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Account SID"}),t.jsx("input",{type:"text",value:I.sms_twilio_sid||"",onChange:e=>fe("sms_twilio_sid",e.target.value),placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Auth Token"}),t.jsx("input",{type:"password",value:I.sms_twilio_token||"",onChange:e=>fe("sms_twilio_token",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Phone Number"}),t.jsx("input",{type:"text",value:I.sms_twilio_from||"",onChange:e=>fe("sms_twilio_from",e.target.value),placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]})]}),"vonage"===I.sms_provider&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vonage API Key"}),t.jsx("input",{type:"text",value:I.sms_vonage_key||"",onChange:e=>fe("sms_vonage_key",e.target.value),placeholder:"API Key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vonage API Secret"}),t.jsx("input",{type:"password",value:I.sms_vonage_secret||"",onChange:e=>fe("sms_vonage_secret",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sender Name/Number"}),t.jsx("input",{type:"text",value:I.sms_vonage_from||"",onChange:e=>fe("sms_vonage_from",e.target.value),placeholder:"CompanyName or +1234567890",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]})]}),"custom"===I.sms_provider&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API URL"}),t.jsx("input",{type:"text",value:I.sms_custom_url||"",onChange:e=>fe("sms_custom_url",e.target.value),placeholder:"https://api.provider.com/sms/send",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"HTTP Method"}),t.jsxs("select",{value:I.sms_custom_method||"POST",onChange:e=>fe("sms_custom_method",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[t.jsx("option",{value:"POST",children:"POST"}),t.jsx("option",{value:"GET",children:"GET"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Request Body (JSON)"}),t.jsx("textarea",{value:I.sms_custom_body||"",onChange:e=>fe("sms_custom_body",e.target.value),placeholder:'{"to": "{{to}}", "message": "{{message}}"}',rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white font-mono text-sm"}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Use ","{{to}}"," and ","{{message}}"," as placeholders"]})]})]}),I.sms_provider&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Phone Number"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:ce,onChange:e=>me(e.target.value),placeholder:"+1234567890",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),t.jsx("button",{onClick:async()=>{var e,a;le(!0);try{const e=await o.post("/notifications/test-sms",{sms_provider:I.sms_provider,sms_twilio_sid:I.sms_twilio_sid,sms_twilio_token:I.sms_twilio_token,sms_twilio_from:I.sms_twilio_from,sms_vonage_key:I.sms_vonage_key,sms_vonage_secret:I.sms_vonage_secret,sms_vonage_from:I.sms_vonage_from,sms_custom_url:I.sms_custom_url,sms_custom_method:I.sms_custom_method,sms_custom_body:I.sms_custom_body,test_phone:ce});m.success(e.data.message||"SMS test successful!")}catch(r){m.error((null==(a=null==(e=r.response)?void 0:e.data)?void 0:a.message)||"SMS test failed")}finally{le(!1)}},disabled:se||!ce,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:se?"Testing...":"Test SMS"})]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"WhatsApp Notifications (Ultramsg)"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Get your Instance ID and Token from ",t.jsx("a",{href:"https://ultramsg.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ultramsg.com"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instance ID"}),t.jsx("input",{type:"text",value:I.whatsapp_instance_id||"",onChange:e=>fe("whatsapp_instance_id",e.target.value),placeholder:"instanceXXXXX",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Token"}),t.jsx("input",{type:"password",value:I.whatsapp_token||"",onChange:e=>fe("whatsapp_token",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Phone Number"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:ce,onChange:e=>me(e.target.value),placeholder:"+1234567890 (with country code)",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),t.jsx("button",{onClick:async()=>{var e,a;ne(!0);try{const e=await o.post("/notifications/test-whatsapp",{whatsapp_instance_id:I.whatsapp_instance_id,whatsapp_token:I.whatsapp_token,test_phone:ce});m.success(e.data.message||"WhatsApp test successful!")}catch(r){m.error((null==(a=null==(e=r.response)?void 0:e.data)?void 0:a.message)||"WhatsApp test failed")}finally{ne(!1)}},disabled:de||!I.whatsapp_instance_id||!I.whatsapp_token,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:de?"Testing...":"Test WhatsApp"})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:je,disabled:!U||be.isPending,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:be.isPending?"Saving...":"Save Notification Settings"})})]}):"license"===T?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"License Information"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Me.mutate(),disabled:Me.isPending,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:Me.isPending?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-700 dark:text-gray-300 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Check for Updates"]})}),t.jsx("button",{onClick:()=>Fe.mutate(),disabled:Fe.isPending,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:Fe.isPending?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Check License"]})})]})]}),Ne?t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[(()=>{const e=(null==Ce?void 0:Ce.license_status)||((null==we?void 0:we.valid)?"active":"blocked"),a={active:{bg:"bg-green-50 dark:bg-green-900/30 border-green-200",text:"text-green-800",subtext:"text-green-700",icon:"text-green-600",label:"License Active",desc:"Your license is valid and active"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200",text:"text-yellow-800",subtext:"text-yellow-700",icon:"text-yellow-600",label:"License Expiring Soon",desc:(null==Ce?void 0:Ce.warning_message)||"Please renew soon"},grace:{bg:"bg-orange-50 border-orange-200",text:"text-orange-800",subtext:"text-orange-700",icon:"text-orange-600",label:"Grace Period",desc:"License expired - renew now to avoid service interruption"},readonly:{bg:"bg-red-50 dark:bg-red-900/30 border-red-200",text:"text-red-800",subtext:"text-red-700",icon:"text-red-600",label:"Read-Only Mode",desc:"License expired - system is read-only. Renew immediately!"},blocked:{bg:"bg-red-50 dark:bg-red-900/30 border-red-200",text:"text-red-800",subtext:"text-red-700",icon:"text-red-600",label:"License Blocked",desc:(null==we?void 0:we.message)||"License invalid or expired"},unknown:{bg:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600",text:"text-gray-800",subtext:"text-gray-700",icon:"text-gray-600",label:"Unknown Status",desc:"Unable to determine license status"}},r=a[e]||a.unknown;return t.jsx("div",{className:`rounded-lg p-4 border ${r.bg}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:`flex-shrink-0 ${r.icon}`,children:"active"===e?t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}):"warning"===e?t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:`font-medium ${r.text}`,children:r.label}),(null==Ce?void 0:Ce.read_only)&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-800 rounded",children:"READ-ONLY"})]}),t.jsx("p",{className:`text-sm ${r.subtext}`,children:r.desc}),void 0!==(null==Ce?void 0:Ce.days_until_expiry)&&0!==(null==Ce?void 0:Ce.days_until_expiry)&&t.jsx("p",{className:`text-sm mt-1 font-medium ${r.subtext}`,children:Ce.days_until_expiry>0?`${Ce.days_until_expiry} days remaining`:`${Math.abs(Ce.days_until_expiry)} days overdue`})]})]})})})(),Pe&&t.jsx("div",{className:"rounded-lg p-4 border "+(Pe.update_available?"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 "+(Pe.update_available?"text-blue-600":"text-gray-500"),children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"font-medium "+(Pe.update_available?"text-blue-800":"text-gray-800"),children:Pe.update_available?"Update Available":"System Up to Date"}),t.jsxs("p",{className:"text-sm "+(Pe.update_available?"text-blue-700":"text-gray-600"),children:["Current version: v",Pe.current_version||"1.0.0",Pe.update_available&&` â†’ v${Pe.new_version}`]}),Pe.update_available&&Pe.release_notes&&t.jsx("p",{className:"text-sm text-blue-600 mt-1",children:Pe.release_notes})]})]}),Pe.update_available&&t.jsx("button",{onClick:()=>{window.location.href="/settings?tab=license"},className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Now"})]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Service Management"})}),t.jsxs("div",{className:"p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restart services if you experience issues after updates or configuration changes."}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{onClick:async()=>{m.loading("Restarting API service...",{id:"restart"});try{await i.restartServices(["api"])}catch(e){}m.success("API service is restarting. Page will reload in 10 seconds.",{id:"restart"}),setTimeout(()=>window.location.reload(),1e4)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart API"]}),t.jsxs("button",{onClick:async()=>{m.loading("Restarting all services...",{id:"restart"});try{await i.restartServices(["all"])}catch(e){}m.success("All services are restarting. Page will reload in 15 seconds.",{id:"restart"}),setTimeout(()=>window.location.reload(),15e3)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart All Services"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"License Details"})}),t.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"License Key"}),t.jsx("span",{className:"font-mono text-sm",children:(null==we?void 0:we.license_key)||"-"})]}),t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Customer Name"}),t.jsx("span",{className:"font-medium",children:(null==we?void 0:we.customer_name)||"-"})]}),t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Plan / Tier"}),t.jsx("span",{className:"font-medium capitalize",children:(null==we?void 0:we.tier)||"-"})]}),t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Max Subscribers"}),t.jsx("span",{className:"font-medium",children:(null==(x=null==we?void 0:we.max_subscribers)?void 0:x.toLocaleString())||"-"})]}),t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"License Type"}),t.jsx("span",{className:"font-medium",children:(null==we?void 0:we.is_lifetime)?"Lifetime":"Subscription"})]}),!(null==we?void 0:we.is_lifetime)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Expires At"}),t.jsx("span",{className:"font-medium",children:(null==we?void 0:we.expires_at)?new Date(we.expires_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),t.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Days Remaining"}),t.jsx("span",{className:"font-medium "+(((null==Ce?void 0:Ce.days_until_expiry)||(null==we?void 0:we.days_remaining)||0)<=0||((null==Ce?void 0:Ce.days_until_expiry)||(null==we?void 0:we.days_remaining)||0)<=7?"text-red-600":((null==Ce?void 0:Ce.days_until_expiry)||(null==we?void 0:we.days_remaining)||0)<=14?"text-yellow-600":"text-green-600"),children:void 0!==(null==Ce?void 0:Ce.days_until_expiry)?Ce.days_until_expiry>0?`${Ce.days_until_expiry} days`:`${Math.abs(Ce.days_until_expiry)} days overdue`:void 0!==(null==we?void 0:we.days_remaining)?`${we.days_remaining} days`:"-"})]})]})]})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Need to upgrade or renew?"}),t.jsx("p",{className:"text-sm text-blue-700",children:"Contact support to upgrade your plan or renew your license."})]})]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:null==(b={general:[{key:"company_name",label:"Company Name",type:"text",placeholder:"Your Company Name"},{key:"company_address",label:"Company Address",type:"textarea",placeholder:"Full address"},{key:"company_phone",label:"Phone Number",type:"text",placeholder:"+1 234 567 890"},{key:"company_email",label:"Email",type:"email",placeholder:"info@company.com"},{key:"system_timezone",label:"System Timezone",type:"timezone",description:"Used for FUP reset, bandwidth rules, and all time-based features"},{key:"date_format",label:"Date Format",type:"select",options:["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY","DD-MM-YYYY"]}],billing:[{key:"currency",label:"Currency Code",type:"text",placeholder:"USD"},{key:"currency_symbol",label:"Currency Symbol",type:"text",placeholder:"$"},{key:"tax_rate",label:"Tax Rate (%)",type:"number",placeholder:"0"},{key:"invoice_prefix",label:"Invoice Prefix",type:"text",placeholder:"INV-"},{key:"payment_methods",label:"Payment Methods",type:"text",placeholder:"cash,bank,mpesa"},{key:"auto_generate_invoice",label:"Auto Generate Invoice",type:"toggle"},{key:"invoice_due_days",label:"Invoice Due Days",type:"number",placeholder:"7"}],service_change:[{key:"upgrade_change_service_fee",label:"Upgrade Fee ($)",type:"number",placeholder:"0",description:"Fee charged when subscriber upgrades to a higher-priced service"},{key:"downgrade_change_service_fee",label:"Downgrade Fee ($)",type:"number",placeholder:"0",description:"Fee charged when subscriber downgrades to a lower-priced service"},{key:"allow_downgrade",label:"Allow Downgrade",type:"toggle",description:"Allow subscribers to change to a lower-priced service"},{key:"downgrade_refund",label:"Refund on Downgrade",type:"toggle",description:"Refund the difference when downgrading (prorate credit)"}],radius:[{key:"daily_quota_reset_time",label:"Daily Quota Reset Time",type:"time",placeholder:"00:00"},{key:"default_session_timeout",label:"Default Session Timeout (sec)",type:"number",placeholder:"86400"},{key:"max_sessions_per_user",label:"Max Sessions Per User",type:"number",placeholder:"1"},{key:"accounting_interval",label:"Accounting Interval (sec)",type:"number",placeholder:"300"},{key:"idle_timeout",label:"Idle Timeout (sec)",type:"number",placeholder:"600"},{key:"simultaneous_use",label:"Allow Simultaneous Use",type:"toggle"},{key:"mac_auth_enabled",label:"MAC Authentication",type:"toggle"},{key:"block_on_daily_quota_exceeded",label:"Block Internet on Daily Quota Exceeded",type:"toggle",description:"When enabled, users will lose internet completely when daily quota is exceeded. When disabled, users get reduced FUP speed."},{key:"block_on_monthly_quota_exceeded",label:"Block Internet on Monthly Quota Exceeded",type:"toggle",description:"When enabled, users will lose internet completely when monthly quota is exceeded. When disabled, users get reduced FUP speed."}],notifications:[],security:[{key:"session_timeout",label:"Admin Session Timeout (min)",type:"number",placeholder:"60"},{key:"max_login_attempts",label:"Max Login Attempts",type:"number",placeholder:"5"},{key:"password_min_length",label:"Min Password Length",type:"number",placeholder:"8"},{key:"api_rate_limit",label:"API Rate Limit (req/min)",type:"number",placeholder:"100"},{key:"allowed_ips",label:"Allowed Admin IPs",type:"text",placeholder:"Leave empty for all"},{key:"remote_support_enabled",label:"Remote Support Access",type:"toggle",description:"Allow ProxPanel support team to access your server for troubleshooting. After enabling, run: proxpanel-support enable"}]}[T])?void 0:b.map(e=>t.jsxs("div",{className:"textarea"===e.type?"md:col-span-2":"",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e.label}),Te(e)]},e.key))})})]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(null==ge?void 0:ge.length)||0," settings configured â€¢",U?" Unsaved changes":" All changes saved"]})})]})}export{y as default};
