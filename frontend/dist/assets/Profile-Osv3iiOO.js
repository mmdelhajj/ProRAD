import{j as e}from"./data-vendor-Gi89QHLZ.js";import{r as s}from"./react-vendor-C1B6conR.js";import{u as a,_ as r,t,M as l}from"./index-BxUq99xc.js";import{z as d}from"./ui-vendor-Bljr83Cq.js";import{F as n}from"./KeyIcon-BchGJZKf.js";import{F as i}from"./EyeSlashIcon-B8qk__vF.js";import{F as c}from"./EyeIcon-hrTjlXb6.js";import"./chart-vendor-C_esy2x0.js";function o(){const{user:o,refreshUser:x}=a(),[m,p]=s.useState(!1),[h,u]=s.useState(!1),[w,g]=s.useState(!1),[j,y]=s.useState(!1),[v,N]=s.useState(!1),[b,f]=s.useState({current_password:"",new_password:"",confirm_password:""});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"My Profile"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View and manage your account"})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/50 rounded-full",children:e.jsx(r,{className:"w-12 h-12 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:(null==o?void 0:o.full_name)||(null==o?void 0:o.username)}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",null==o?void 0:o.username]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:(null==o?void 0:o.email)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:(null==o?void 0:o.phone)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Account Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white capitalize",children:0===(null==o?void 0:o.user_type)?"Administrator":1===(null==o?void 0:o.user_type)?"Staff":"Reseller"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+((null==o?void 0:o.is_active)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:(null==o?void 0:o.is_active)?"Active":"Inactive"})]})]})]})]})}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/50 rounded-lg",children:e.jsx(n,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Update your password"})]})]}),!m&&e.jsx("button",{onClick:()=>p(!0),className:"btn-primary",children:"Change Password"})]}),m&&e.jsxs("form",{onSubmit:async e=>{var s,a;if(e.preventDefault(),b.new_password===b.confirm_password)if(b.new_password.length<6)d.error("Password must be at least 6 characters");else{u(!0);try{const e=await l.post("/auth/change-password",{current_password:b.current_password,new_password:b.new_password});e.data.success?(d.success("Password changed successfully"),f({current_password:"",new_password:"",confirm_password:""}),p(!1),await x()):d.error(e.data.message||"Failed to change password")}catch(r){d.error((null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.message)||"Failed to change password")}u(!1)}else d.error("New passwords do not match")},className:"mt-4 space-y-4 border-t dark:border-gray-700 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:b.current_password,onChange:e=>f({...b,current_password:e.target.value}),className:"input pr-10",placeholder:"Enter current password",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!w),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:w?e.jsx(i,{className:"w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:j?"text":"password",value:b.new_password,onChange:e=>f({...b,new_password:e.target.value}),className:"input pr-10",placeholder:"Enter new password (min 6 characters)",minLength:6,required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:j?e.jsx(i,{className:"w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",value:b.confirm_password,onChange:e=>f({...b,confirm_password:e.target.value}),className:"input pr-10",placeholder:"Confirm new password",minLength:6,required:!0}),e.jsx("button",{type:"button",onClick:()=>N(!v),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:v?e.jsx(i,{className:"w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:h,className:"btn-primary flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-4 h-4"}),"Save Password"]})}),e.jsx("button",{type:"button",onClick:()=>{p(!1),f({current_password:"",new_password:"",confirm_password:""})},className:"btn-secondary",children:"Cancel"})]})]})]})]})}export{o as default};
