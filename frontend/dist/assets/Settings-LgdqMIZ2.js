import{b as e,u as r,d as t,j as a}from"./data-vendor-DrqtOFCb.js";import{r as s,R as l,c as n}from"./react-vendor-_qYBQpt5.js";import{M as d,N as i,O as o,e as c,x as m,u as g,P as x,Q as u,R as h,S as b,T as y,A as p,U as v,V as f,L as k}from"./index-WRM7fWDP.js";import{n as j,z as N}from"./ui-vendor-C17HITwC.js";import{F as w}from"./PhotoIcon-CvHog_6Y.js";import{F as _}from"./TrashIcon-3C89j8Vq.js";import"./chart-vendor-CsTzT1mg.js";function C({title:e,titleId:r,...t},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},t),e?s.createElement("title",{id:r},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const S=s.forwardRef(C),M=()=>{var l,n,i;const o=e(),[c,m]=s.useState(null),[g,x]=s.useState(""),[u,h]=s.useState(""),[b,y]=s.useState(""),[p,v]=s.useState(""),[f,k]=s.useState("secondary"),[N,w]=s.useState(null),[_,C]=s.useState(!1),[S,M]=s.useState(!1),[P,A]=s.useState(!1),[R,L]=s.useState(""),[E,F]=s.useState(""),[I,T]=s.useState(null),[D,z]=s.useState(!1),{data:B,isLoading:U}=r({queryKey:["cluster-config"],queryFn:async()=>(await d.getConfig()).data.data}),{data:O,isLoading:$,refetch:H}=r({queryKey:["cluster-status"],queryFn:async()=>(await d.getStatus()).data.data,refetchInterval:1e4,enabled:null==B?void 0:B.is_active}),{data:W,refetch:Q}=r({queryKey:["cluster-main-status"],queryFn:async()=>(await d.checkMainStatus()).data.data,refetchInterval:3e4,enabled:(null==B?void 0:B.is_active)&&"main"!==(null==B?void 0:B.server_role)}),q=t({mutationFn:e=>d.setupMain(e),onSuccess:e=>{j.success("Main server configured successfully"),m(null),o.invalidateQueries(["cluster-config"]),o.invalidateQueries(["cluster-status"])},onError:e=>{var r,t;j.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to configure main server")}}),V=t({mutationFn:e=>d.setupSecondary(e),onSuccess:e=>{j.success("Successfully joined cluster"),m(null),o.invalidateQueries(["cluster-config"]),o.invalidateQueries(["cluster-status"])},onError:e=>{var r,t;j.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to join cluster")}}),Y=t({mutationFn:()=>d.leaveCluster(),onSuccess:()=>{j.success("Left cluster successfully"),o.invalidateQueries(["cluster-config"]),o.invalidateQueries(["cluster-status"])},onError:e=>{var r,t;j.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to leave cluster")}}),G=t({mutationFn:e=>d.removeNode(e),onSuccess:()=>{j.success("Node removed from cluster"),o.invalidateQueries(["cluster-status"])},onError:e=>{var r,t;j.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to remove node")}}),K=async()=>{var e,r;C(!0),w(null);try{const e=await d.testConnection({main_server_ip:g,cluster_secret:u});w(e.data)}catch(t){w({success:!1,message:(null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Connection failed"})}finally{C(!1)}},J=()=>{q.mutate({server_name:b||"Main Server",server_ip:p||(null==B?void 0:B.server_ip)})},X=()=>{g&&u?V.mutate({main_server_ip:g,cluster_secret:u,server_name:b||"Secondary Server",server_ip:p||(null==B?void 0:B.server_ip),server_role:f}):j.error("Main server IP and cluster secret are required")},Z=async()=>{var e,r;z(!0),T(null);try{const e=await d.testSourceConnection({source_server_ip:R,root_password:E});T(e.data)}catch(t){T({success:!1,message:(null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Connection failed"})}finally{z(!1)}},ee=async()=>{var e,r;if(null==I?void 0:I.success){if(confirm(`Are you sure you want to recover data from ${R}?\n\nThis will:\nâ€¢ Download the full database from the source server\nâ€¢ Replace all data on this server\nâ€¢ Configure this server as the new main\n\nThis process may take a few minutes.`)){A(!0);try{const e=await d.recoverFromServer({source_server_ip:R,root_password:E,become_main:!0});e.data.success?(j.success("Recovery complete! Refreshing page..."),setTimeout(()=>{window.location.reload()},2e3)):j.error(e.data.message||"Recovery failed")}catch(t){j.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Recovery failed")}finally{A(!1)}}}else j.error("Please test the connection first")},re=e=>{switch(e){case"online":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"syncing":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"offline":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400";case"error":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}},te=e=>{switch(e){case"online":return"ðŸŸ¢";case"syncing":return"ðŸŸ¡";case"offline":return"âš«";case"error":return"ðŸ”´";default:return"âšª"}};return U?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(null==B?void 0:B.is_active)&&"standalone"!==(null==B?void 0:B.server_role)?a.jsxs("div",{className:"space-y-6",children:["main"!==(null==B?void 0:B.server_role)&&(null==W?void 0:W.can_promote)&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-300",children:"Main Server Offline"}),a.jsxs("p",{className:"mt-1 text-sm text-red-700 dark:text-red-400",children:["Main server (",null==W?void 0:W.main_server_ip,") has been offline for ",null==W?void 0:W.offline_minutes," minutes.",(null==W?void 0:W.main_last_seen)&&a.jsxs("span",{className:"block mt-1",children:["Last seen: ",W.main_last_seen]})]}),a.jsx("p",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:"Your data is safe on this server. You can promote this server to become the new main server."}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:async()=>{var e,r;if(confirm("Are you sure you want to promote this server to MAIN?\n\nThis will:\nâ€¢ Make this server the primary database\nâ€¢ Allow all write operations\nâ€¢ Stop replication from old main\n\nOnly do this if the main server is offline!")){M(!0);try{const e=await d.promoteToMain();e.data.success?(j.success("Successfully promoted to main server!"),o.invalidateQueries(["cluster-config"]),o.invalidateQueries(["cluster-status"]),o.invalidateQueries(["cluster-main-status"])):j.error(e.data.message||"Failed to promote")}catch(t){j.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Failed to promote to main")}finally{M(!1)}}},disabled:S,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium text-lg",children:S?a.jsxs("span",{className:"flex items-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Promoting..."]}):"ðŸ”„ Promote to Main Server"})})]})]})}),"main"!==(null==B?void 0:B.server_role)&&(null==W?void 0:W.is_main_online)&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-400",children:["This is a ",a.jsx("strong",{children:"secondary server"})," (read-only). To create or edit data, use the main server (",null==W?void 0:W.main_server_ip,")."]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"HA Cluster Status"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cluster ID: ",a.jsx("span",{className:"font-mono",children:null==B?void 0:B.cluster_id})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${re("online")}`,children:[te("online")," Active"]}),a.jsx("button",{onClick:()=>H(),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"ðŸ”„"})]})]}),"main"===(null==B?void 0:B.server_role)&&a.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Cluster Secret Key"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Share this key with secondary servers to join the cluster"})]}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText((null==B?void 0:B.cluster_secret)||""),j.success("Copied to clipboard")},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"ðŸ“‹ Copy"})]}),a.jsx("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded font-mono text-sm",children:null==B?void 0:B.cluster_secret})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Server"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"IP Address"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Version"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"DB Sync"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Resources"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Last Seen"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),a.jsx("tbody",{children:null==(n=null==O?void 0:O.nodes)?void 0:n.map(e=>{var r,t;return a.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.server_name})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("main"===e.server_role?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"),children:e.server_role})}),a.jsx("td",{className:"py-3 px-4 font-mono text-sm text-gray-600 dark:text-gray-400",children:e.server_ip}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",children:e.version||"Unknown"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${re(e.status)}`,children:[te(e.status)," ",e.status]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${re(e.db_sync_status)}`,children:[e.db_sync_status,e.db_replication_lag>0&&a.jsxs("span",{className:"ml-1",children:["(",e.db_replication_lag,"s lag)"]})]})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{title:"CPU",children:["ðŸ’» ",null==(r=e.cpu_usage)?void 0:r.toFixed(0),"%"]}),a.jsxs("span",{title:"Memory",children:["ðŸ§  ",null==(t=e.memory_usage)?void 0:t.toFixed(0),"%"]})]})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:e.last_heartbeat?new Date(e.last_heartbeat).toLocaleTimeString():"Never"}),a.jsx("td",{className:"py-3 px-4",children:"main"!==e.server_role&&"main"===(null==B?void 0:B.server_role)&&a.jsx("button",{onClick:()=>{confirm(`Remove ${e.server_name} from cluster?`)&&G.mutate(e.id)},className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})})]},e.id)})})]})}),a.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(null==O?void 0:O.online_nodes)||0,"/",(null==O?void 0:O.total_nodes)||0]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nodes Online"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==O?void 0:O.db_replication_ok)?"âœ“":"âœ—"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"DB Replication"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:null==B?void 0:B.server_role}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Server Role"})]})]})]}),(null==(i=null==O?void 0:O.events)?void 0:i.length)>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Recent Cluster Events"}),a.jsx("div",{className:"space-y-2",children:O.events.map(e=>a.jsxs("div",{className:"p-3 rounded-lg "+("error"===e.severity?"bg-red-50 dark:bg-red-900/30":"warning"===e.severity?"bg-yellow-50 dark:bg-yellow-900/30":"bg-gray-50 dark:bg-gray-700"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.event_type}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]},e.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Cluster Actions"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:()=>H(),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"ðŸ”„ Force Sync"}),"main"!==(null==B?void 0:B.server_role)&&a.jsx("button",{onClick:()=>{confirm("Are you sure you want to leave the cluster?")&&Y.mutate()},disabled:Y.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y.isPending?"Leaving...":"âŒ Leave Cluster"}),"main"===(null==B?void 0:B.server_role)&&1===(null==O?void 0:O.total_nodes)&&a.jsx("button",{onClick:()=>{confirm("Dissolve the cluster and return to standalone mode?")&&Y.mutate()},disabled:Y.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:Y.isPending?"Dissolving...":"âŒ Dissolve Cluster"})]})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"HA Cluster Configuration"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Set up High Availability clustering to improve performance, redundancy, and backup capabilities."}),c?"recover"===c?a.jsxs("div",{className:"max-w-lg",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Recover Data from Existing Server"}),a.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-4",children:[a.jsx("h5",{className:"font-medium text-orange-900 dark:text-orange-300 mb-2",children:"âš ï¸ Important"}),a.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:"This will download all data from the source server and replace any existing data on this server. Make sure the source server is running and accessible."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Server IP Address *"}),a.jsx("input",{type:"text",value:R,onChange:e=>L(e.target.value),placeholder:"10.0.0.219",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The IP of your existing ProISP server with the data"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Root Password *"}),a.jsx("input",{type:"password",value:E,onChange:e=>F(e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"SSH root password for the source server"})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsx("button",{onClick:Z,disabled:D||!R||!E,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:D?"Testing...":"ðŸ” Test Connection"}),I&&a.jsxs("div",{className:"mt-3 p-3 rounded-lg "+(I.success?"bg-green-50 dark:bg-green-900/30":"bg-red-50 dark:bg-red-900/30"),children:[a.jsx("p",{className:"font-medium "+(I.success?"text-green-800 dark:text-green-400":"text-red-800 dark:text-red-400"),children:I.success?"âœ“ Connection successful":"âœ— Connection failed"}),I.success&&I.data&&a.jsxs("div",{className:"mt-2 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:["SSH: ",I.data.ssh_ok?"âœ“":"âœ—"]}),a.jsxs("p",{children:["Database: ",I.data.database_ok?"âœ“":"âœ—"]}),a.jsxs("p",{children:["Subscribers: ",(null==(l=I.data.subscribers)?void 0:l.toLocaleString())||0]})]}),I.message&&!I.success&&a.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-400",children:I.message})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:ee,disabled:P||!(null==I?void 0:I.success),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:P?"Recovering... Please wait":"ðŸ“¥ Recover Data"}),a.jsx("button",{onClick:()=>{m(null),T(null)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"})]})]})]}):"main"===c?a.jsxs("div",{className:"max-w-lg",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Configure as Main Server"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Server Name"}),a.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Main Server",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Server IP Address"}),a.jsx("input",{type:"text",value:p||(null==B?void 0:B.server_ip)||"",onChange:e=>v(e.target.value),placeholder:(null==B?void 0:B.server_ip)||"Auto-detect",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-detect"})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:"What happens next?"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"â€¢ A unique Cluster ID and Secret will be generated"}),a.jsx("li",{children:"â€¢ PostgreSQL will be configured for replication"}),a.jsx("li",{children:"â€¢ Redis will be configured as primary"}),a.jsx("li",{children:"â€¢ You'll receive the cluster secret to share with secondary servers"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:J,disabled:q.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:q.isPending?"Configuring...":"Configure as Main"}),a.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"})]})]})]}):a.jsxs("div",{className:"max-w-lg",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Join Cluster as Secondary"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Main Server IP Address *"}),a.jsx("input",{type:"text",value:g,onChange:e=>x(e.target.value),placeholder:"192.168.1.10",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cluster Secret Key *"}),a.jsx("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"xxxx-xxxx-xxxx-xxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from the main server's cluster settings"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Server Role"}),a.jsxs("select",{value:f,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"secondary",children:"Secondary (Failover + RADIUS backup)"}),a.jsx("option",{value:"server3",children:"Server 3 (Read-only + Reports)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Server Name"}),a.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Secondary Server",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsx("button",{onClick:K,disabled:_||!g,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:_?"Testing...":"ðŸ” Test Connection"}),N&&a.jsxs("div",{className:"mt-3 p-3 rounded-lg "+(N.success?"bg-green-50 dark:bg-green-900/30":"bg-red-50 dark:bg-red-900/30"),children:[a.jsx("p",{className:"font-medium "+(N.success?"text-green-800 dark:text-green-400":"text-red-800 dark:text-red-400"),children:N.success?"âœ“ Connection successful":"âœ— Connection failed"}),N.success&&a.jsxs("div",{className:"mt-2 text-sm text-green-700 dark:text-green-400",children:[a.jsxs("p",{children:["API: ",N.api_ok?"âœ“":"âœ—"]}),a.jsxs("p",{children:["Database: ",N.db_ok?"âœ“":"âœ—"]}),a.jsxs("p",{children:["Redis: ",N.redis_ok?"âœ“":"âœ—"]})]}),N.message&&!N.success&&a.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-400",children:N.message})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:X,disabled:V.isPending||!g||!u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:V.isPending?"Joining...":"Join Cluster"}),a.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"})]})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:border-blue-500 dark:hover:border-blue-500 cursor-pointer transition-colors",onClick:()=>m("main"),children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Main Server"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Primary node"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure this server as the main (primary) server. Other servers will replicate from this server."}),a.jsxs("ul",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"â€¢ Database primary (all writes)"}),a.jsx("li",{children:"â€¢ Redis primary"}),a.jsx("li",{children:"â€¢ RADIUS primary"}),a.jsx("li",{children:"â€¢ API active"})]})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:border-green-500 dark:hover:border-green-500 cursor-pointer transition-colors",onClick:()=>m("secondary"),children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Secondary Server"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Replica node"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Join an existing cluster as a secondary server. Data will be replicated from the main server."}),a.jsxs("ul",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"â€¢ Database replica (real-time sync)"}),a.jsx("li",{children:"â€¢ Redis replica"}),a.jsx("li",{children:"â€¢ RADIUS backup"}),a.jsx("li",{children:"â€¢ API standby (auto-failover)"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:a.jsxs("div",{className:"border border-orange-200 dark:border-orange-700 rounded-lg p-6 hover:border-orange-500 dark:hover:border-orange-500 cursor-pointer transition-colors bg-orange-50 dark:bg-orange-900/20",onClick:()=>m("recover"),children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recover from Existing Server"}),a.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Disaster Recovery"})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Restore data from an existing server. Use this if you're replacing a failed main server or migrating to new hardware."}),a.jsxs("ul",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("li",{children:"â€¢ Download full database backup"}),a.jsx("li",{children:"â€¢ Restore all subscribers and settings"}),a.jsx("li",{children:"â€¢ Sync uploads (logo, favicon)"}),a.jsx("li",{children:"â€¢ Become the new main server"})]})]})})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Current Server Information"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Server IP:"}),a.jsx("p",{className:"font-mono text-gray-900 dark:text-white",children:(null==B?void 0:B.server_ip)||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Hardware ID:"}),a.jsx("p",{className:"font-mono text-gray-900 dark:text-white truncate",children:(null==B?void 0:B.hardware_id)||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Database ID:"}),a.jsx("p",{className:"font-mono text-gray-900 dark:text-white truncate",children:(null==B?void 0:B.database_id)||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),a.jsx("p",{className:"text-gray-900 dark:text-white",children:"Standalone"})]})]})]})]})};function P(){const[e,r]=s.useState(!0),[t,l]=s.useState(null),[n,d]=s.useState(!1),[g,x]=s.useState({interface:"eth0",ip_address:"",gateway:"",dns1:"8.8.8.8",dns2:"8.8.4.4",dns_method:"netplan"}),[u,h]=s.useState([]),[b,y]=s.useState(!1),[p,v]=s.useState(60),[f,k]=s.useState(null);s.useEffect(()=>{w(),j()},[]);const j=async()=>{try{const e=await i.detectDNSMethod();if(e.data.success){const r=e.data.data;x(e=>({...e,dns_method:r.detected_method})),"netplan"===r.detected_method&&r.netplan_dns.length>0?x(e=>({...e,dns1:r.netplan_dns[0]||"8.8.8.8",dns2:r.netplan_dns[1]||"8.8.4.4"})):"resolv"===r.detected_method&&r.resolv_dns.length>0&&x(e=>({...e,dns1:r.resolv_dns[0]||"8.8.8.8",dns2:r.resolv_dns[1]||"8.8.4.4"}))}}catch(e){}},w=async()=>{try{r(!0);const e=await i.getCurrentConfig();if(e.data.success){const r=e.data.data;if(l(r),r.current_ip_info){const e=r.current_ip_info.split("\n"),t=new Map;let a=null;for(let r=0;r<e.length;r++){const s=e[r],l=s.match(/\d+:\s+([^:@\s]+)/);if(l){a=l[1];const e=a.startsWith("docker")||a.startsWith("br-")||a.startsWith("veth");"lo"===a||e||t.has(a)||t.set(a,{name:a,ip:"No IPv4"})}const n=s.match(/inet\s+(\d+\.\d+\.\d+\.\d+\/\d+)/);n&&a&&t.has(a)&&!n[1].startsWith("127.")&&t.set(a,{name:a,ip:n[1]})}const s=Array.from(t.values());h(s);const l=s.find(e=>"No IPv4"!==e.ip)||s[0];l&&x(e=>({...e,interface:l.name,ip_address:"No IPv4"!==l.ip?l.ip:""}))}if(r.current_routes){const e=r.current_routes.match(/default via\s+(\d+\.\d+\.\d+\.\d+)/);e&&x(r=>({...r,gateway:e[1]}))}if(r.netplan_config){const e=r.netplan_config.split("\n"),t=[];let a=!1;const s=r.netplan_config.includes("dhcp4: true")||r.netplan_config.includes("dhcp4:true")||r.netplan_config.includes("dhcp6: true")||r.netplan_config.includes("dhcp6:true");d(s),s&&N.warning("âš ï¸ DHCP Detected: Server is using automatic IP. Consider converting to static IP for stability.",{duration:6e3});for(const r of e)if(r.includes("nameservers:"))a=!0;else if(!a||!r.includes("addresses:")){if(a&&r.trim().startsWith("- ")){const e=r.trim().replace(/^-\s*/,"");t.push(e)}!a||r.trim().startsWith("-")||""===r.trim()||r.includes("addresses:")||(a=!1)}t.length>0&&x(e=>({...e,dns1:t[0]||"8.8.8.8",dns2:t[1]||"8.8.4.4"}))}}}catch(e){N.error("Failed to load current network configuration")}finally{r(!1)}};s.useEffect(()=>{let e;return b&&p>0&&(e=setInterval(()=>{v(e=>e<=1?(y(!1),k(null),N.info("Test mode ended - settings reverted"),60):e-1)},1e3)),()=>clearInterval(e)},[b,p]);const _=async(e,r)=>{if(x(t=>({...t,[e]:r})),"dns_method"===e)try{const e=await i.detectDNSMethod();if(e.data.success){const t=e.data.data;"netplan"===r&&t.netplan_dns.length>0?(x(e=>({...e,dns1:t.netplan_dns[0]||"8.8.8.8",dns2:t.netplan_dns[1]||"8.8.4.4",dns_method:r})),N.success(`Loaded DNS from netplan: ${t.netplan_dns.join(", ")}`,{duration:3e3})):"resolv"===r&&t.resolv_dns.length>0?(x(e=>({...e,dns1:t.resolv_dns[0]||"8.8.8.8",dns2:t.resolv_dns[1]||"8.8.4.4",dns_method:r})),N.success(`Loaded DNS from resolv.conf: ${t.resolv_dns.join(", ")}`,{duration:3e3})):N.info(`No DNS found in ${r}, keeping current values`,{duration:3e3})}}catch(t){}};return e&&!t?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Network Configuration"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure server network settings (IP, Gateway, DNS)"})]}),a.jsx("button",{onClick:w,disabled:e,className:"text-sm text-primary-600 hover:text-primary-700 disabled:opacity-50",children:"Refresh"})]}),n&&a.jsx("div",{className:"mb-4 bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 dark:border-orange-600 p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(o,{className:"w-6 h-6 text-orange-600 dark:text-orange-500 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"text-sm font-semibold text-orange-800 dark:text-orange-400 mb-1",children:"âš ï¸ DHCP Detected - Automatic IP Configuration"}),a.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-2",children:["Your server is currently using ",a.jsx("strong",{children:"DHCP (automatic IP assignment)"}),". This means your IP address may change unexpectedly, causing service interruptions."]}),a.jsxs("div",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1",children:[a.jsx("p",{children:a.jsx("strong",{children:"Current DHCP-assigned values:"})}),a.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[a.jsxs("li",{children:["IP Address: ",g.ip_address||"Loading..."]}),a.jsxs("li",{children:["Gateway: ",g.gateway||"Loading..."]}),a.jsxs("li",{children:["DNS: ",g.dns1,", ",g.dns2]})]})]}),a.jsx("div",{className:"mt-3 p-3 bg-orange-100 dark:bg-orange-900/40 rounded border border-orange-200 dark:border-orange-700",children:a.jsxs("p",{className:"text-sm font-medium text-orange-900 dark:text-orange-200",children:["ðŸ’¡ ",a.jsx("strong",{children:"Recommendation:"}),' Click "Test Configuration" below to convert DHCP to a permanent static IP. This will ensure your server maintains the same IP address and prevents connectivity issues.']})})]})]})}),a.jsx("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(o,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-500",children:"Caution: Network Configuration"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"Changing network settings incorrectly may cause loss of connectivity. Always test first before applying permanently. Test mode will automatically revert after 60 seconds if not confirmed."})]})]})}),b&&a.jsx("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx(c,{className:"w-5 h-5 text-blue-600 dark:text-blue-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-500",children:"Test Mode Active"}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:["Settings will auto-revert in ",a.jsx("strong",{children:p}),' seconds. Click "Apply Permanently" to keep these settings.']})]})]}),a.jsxs("button",{onClick:async()=>{var e,t;try{r(!0);(await i.applyConfig(g)).data.success&&(y(!1),v(60),k(null),N.success("Network settings applied permanently"),w())}catch(a){N.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Failed to apply network configuration permanently")}finally{r(!1)}},disabled:e,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md disabled:opacity-50",children:[a.jsx(m,{className:"w-4 h-4 mr-2"}),n?"Confirm: Convert to Static IP":"Apply Permanently"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network Interface"}),u.length>=1?a.jsx("select",{value:g.interface,onChange:e=>{const r=e.target.value,t=u.find(e=>e.name===r);t&&(x(e=>({...e,interface:t.name,ip_address:t.ip})),N.success(`Switched to ${t.name} (${t.ip})`))},className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:u.map(e=>a.jsxs("option",{value:e.name,children:[e.name," (",e.ip,")"]},e.name))}):a.jsx("input",{type:"text",value:g.interface,onChange:e=>_("interface",e.target.value),placeholder:"eth0, ens3, enp0s3",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u.length>=1?`${u.length} interface${u.length>1?"s":""} detected`:"Common: eth0, ens3, enp0s3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"IP Address / CIDR"}),a.jsx("input",{type:"text",value:g.ip_address,onChange:e=>_("ip_address",e.target.value),placeholder:"192.168.1.100/24",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example: 192.168.1.100/24"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gateway"}),a.jsx("input",{type:"text",value:g.gateway,onChange:e=>_("gateway",e.target.value),placeholder:"192.168.1.1",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example: 192.168.1.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primary DNS"}),a.jsx("input",{type:"text",value:g.dns1,onChange:e=>_("dns1",e.target.value),placeholder:"8.8.8.8",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Default: 8.8.8.8 (Google DNS)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secondary DNS"}),a.jsx("input",{type:"text",value:g.dns2,onChange:e=>_("dns2",e.target.value),placeholder:"8.8.4.4",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Default: 8.8.4.4 (Google DNS)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"DNS Configuration Method"}),a.jsxs("select",{value:g.dns_method,onChange:e=>_("dns_method",e.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:[a.jsx("option",{value:"netplan",children:"Netplan + systemd-resolved (Ubuntu/Debian)"}),a.jsx("option",{value:"resolv",children:"Direct /etc/resolv.conf (Traditional)"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Netplan: Modern Ubuntu/Debian | resolv.conf: Traditional/Other distros"})]})]}),a.jsxs("div",{className:"mt-6 flex gap-4",children:[a.jsx("button",{onClick:async()=>{var e,t,a,s;if(g.interface&&g.ip_address&&g.gateway)try{r(!0);const e=await i.testConfig(g);if(e.data.success)if(e.data.test_mode)y(!0),v(e.data.revert_seconds||60),N.success('TEST MODE: You have 60 seconds to access the new IP and click "Save Changes"',{duration:8e3});else{const r=e.data.message||"Network configuration saved";N.success(r,{duration:5e3})}}catch(l){const r=(null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||"Failed to apply network configuration",n=null==(s=null==(a=l.response)?void 0:a.data)?void 0:s.error;N.error(n?`${r}: ${n}`:r,{duration:8e3})}finally{r(!1)}else N.error("Interface, IP address, and gateway are required")},disabled:e||b,className:"inline-flex items-center px-6 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md disabled:opacity-50",children:e?"Applying...":n?"Convert DHCP â†’ Static (Test 60s)":"Test (60s)"}),b&&a.jsx("button",{onClick:()=>{y(!1),v(60),k(null),N.info("Test mode cancelled")},className:"inline-flex items-center px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel Test"})]})]})}var A,R,L=Object.defineProperty,E=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,T=(e,r,t)=>r in e?L(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,D=(e,r)=>{for(var t in r||(r={}))F.call(r,t)&&T(e,t,r[t]);if(E)for(var t of E(r))I.call(r,t)&&T(e,t,r[t]);return e},z=(e,r)=>{var t={};for(var a in e)F.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&E)for(var a of E(e))r.indexOf(a)<0&&I.call(e,a)&&(t[a]=e[a]);return t};(e=>{const r=class r{constructor(e,t,a,l){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version value out of range");if(l<-1||l>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let n=[];for(let r=0;r<this.size;r++)n.push(!1);for(let r=0;r<this.size;r++)this.modules.push(n.slice()),this.isFunction.push(n.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(a);if(this.drawCodewords(d),-1==l){let e=1e9;for(let r=0;r<8;r++){this.applyMask(r),this.drawFormatBits(r);const t=this.getPenaltyScore();t<e&&(l=r,e=t),this.applyMask(r)}}s(0<=l&&l<=7),this.mask=l,this.applyMask(l),this.drawFormatBits(l),this.isFunction=[]}static encodeText(t,a){const s=e.QrSegment.makeSegments(t);return r.encodeSegments(s,a)}static encodeBinary(t,a){const s=e.QrSegment.makeBytes(t);return r.encodeSegments([s],a)}static encodeSegments(e,a,l=1,d=40,i=-1,o=!0){if(!(r.MIN_VERSION<=l&&l<=d&&d<=r.MAX_VERSION)||i<-1||i>7)throw new RangeError("Invalid value");let c,m;for(c=l;;c++){const t=8*r.getNumDataCodewords(c,a),s=n.getTotalBits(e,c);if(s<=t){m=s;break}if(c>=d)throw new RangeError("Data too long")}for(const t of[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH])o&&m<=8*r.getNumDataCodewords(c,t)&&(a=t);let g=[];for(const r of e){t(r.mode.modeBits,4,g),t(r.numChars,r.mode.numCharCountBits(c),g);for(const e of r.getData())g.push(e)}s(g.length==m);const x=8*r.getNumDataCodewords(c,a);s(g.length<=x),t(0,Math.min(4,x-g.length),g),t(0,(8-g.length%8)%8,g),s(g.length%8==0);for(let r=236;g.length<x;r^=253)t(r,8,g);let u=[];for(;8*u.length<g.length;)u.push(0);return g.forEach((e,r)=>u[r>>>3]|=e<<7-(7&r)),new r(c,a,u,i)}getModule(e,r){return 0<=e&&e<this.size&&0<=r&&r<this.size&&this.modules[r][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),r=e.length;for(let t=0;t<r;t++)for(let a=0;a<r;a++)0==t&&0==a||0==t&&a==r-1||t==r-1&&0==a||this.drawAlignmentPattern(e[t],e[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const r=this.errorCorrectionLevel.formatBits<<3|e;let t=r;for(let a=0;a<10;a++)t=t<<1^1335*(t>>>9);const l=21522^(r<<10|t);s(l>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,a(l,s));this.setFunctionModule(8,7,a(l,6)),this.setFunctionModule(8,8,a(l,7)),this.setFunctionModule(7,8,a(l,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,a(l,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,a(l,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,a(l,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^7973*(e>>>11);const r=this.version<<12|e;s(r>>>18==0);for(let t=0;t<18;t++){const e=a(r,t),s=this.size-11+t%3,l=Math.floor(t/3);this.setFunctionModule(s,l,e),this.setFunctionModule(l,s,e)}}drawFinderPattern(e,r){for(let t=-4;t<=4;t++)for(let a=-4;a<=4;a++){const s=Math.max(Math.abs(a),Math.abs(t)),l=e+a,n=r+t;0<=l&&l<this.size&&0<=n&&n<this.size&&this.setFunctionModule(l,n,2!=s&&4!=s)}}drawAlignmentPattern(e,r){for(let t=-2;t<=2;t++)for(let a=-2;a<=2;a++)this.setFunctionModule(e+a,r+t,1!=Math.max(Math.abs(a),Math.abs(t)))}setFunctionModule(e,r,t){this.modules[r][e]=t,this.isFunction[r][e]=!0}addEccAndInterleave(e){const t=this.version,a=this.errorCorrectionLevel;if(e.length!=r.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");const l=r.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],n=r.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],d=Math.floor(r.getNumRawDataModules(t)/8),i=l-d%l,o=Math.floor(d/l);let c=[];const m=r.reedSolomonComputeDivisor(n);for(let s=0,x=0;s<l;s++){let t=e.slice(x,x+o-n+(s<i?0:1));x+=t.length;const a=r.reedSolomonComputeRemainder(t,m);s<i&&t.push(0),c.push(t.concat(a))}let g=[];for(let r=0;r<c[0].length;r++)c.forEach((e,t)=>{(r!=o-n||t>=i)&&g.push(e[r])});return s(g.length==d),g}drawCodewords(e){if(e.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let r=this.size-1;r>=1;r-=2){6==r&&(r=5);for(let s=0;s<this.size;s++)for(let l=0;l<2;l++){const n=r-l,d=!(r+1&2)?this.size-1-s:s;!this.isFunction[d][n]&&t<8*e.length&&(this.modules[d][n]=a(e[t>>>3],7-(7&t)),t++)}}s(t==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let r=0;r<this.size;r++)for(let t=0;t<this.size;t++){let a;switch(e){case 0:a=(t+r)%2==0;break;case 1:a=r%2==0;break;case 2:a=t%3==0;break;case 3:a=(t+r)%3==0;break;case 4:a=(Math.floor(t/3)+Math.floor(r/2))%2==0;break;case 5:a=t*r%2+t*r%3==0;break;case 6:a=(t*r%2+t*r%3)%2==0;break;case 7:a=((t+r)%2+t*r%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[r][t]&&a&&(this.modules[r][t]=!this.modules[r][t])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let t=!1,a=0,l=[0,0,0,0,0,0,0];for(let n=0;n<this.size;n++)this.modules[s][n]==t?(a++,5==a?e+=r.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,l),t||(e+=this.finderPenaltyCountPatterns(l)*r.PENALTY_N3),t=this.modules[s][n],a=1);e+=this.finderPenaltyTerminateAndCount(t,a,l)*r.PENALTY_N3}for(let s=0;s<this.size;s++){let t=!1,a=0,l=[0,0,0,0,0,0,0];for(let n=0;n<this.size;n++)this.modules[n][s]==t?(a++,5==a?e+=r.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,l),t||(e+=this.finderPenaltyCountPatterns(l)*r.PENALTY_N3),t=this.modules[n][s],a=1);e+=this.finderPenaltyTerminateAndCount(t,a,l)*r.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let t=0;t<this.size-1;t++){const a=this.modules[s][t];a==this.modules[s][t+1]&&a==this.modules[s+1][t]&&a==this.modules[s+1][t+1]&&(e+=r.PENALTY_N2)}let t=0;for(const r of this.modules)t=r.reduce((e,r)=>e+(r?1:0),t);const a=this.size*this.size,l=Math.ceil(Math.abs(20*t-10*a)/a)-1;return s(0<=l&&l<=9),e+=l*r.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,r=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let t=[6];for(let a=this.size-7;t.length<e;a-=r)t.splice(1,0,a);return t}}static getNumRawDataModules(e){if(e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const r=Math.floor(e/7)+2;t-=(25*r-10)*r-55,e>=7&&(t-=36)}return s(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(r.getNumRawDataModules(e)/8)-r.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*r.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let a=1;for(let s=0;s<e;s++){for(let e=0;e<t.length;e++)t[e]=r.reedSolomonMultiply(t[e],a),e+1<t.length&&(t[e]^=t[e+1]);a=r.reedSolomonMultiply(a,2)}return t}static reedSolomonComputeRemainder(e,t){let a=t.map(e=>0);for(const s of e){const e=s^a.shift();a.push(0),t.forEach((t,s)=>a[s]^=r.reedSolomonMultiply(t,e))}return a}static reedSolomonMultiply(e,r){if(e>>>8!=0||r>>>8!=0)throw new RangeError("Byte out of range");let t=0;for(let a=7;a>=0;a--)t=t<<1^285*(t>>>7),t^=(r>>>a&1)*e;return s(t>>>8==0),t}finderPenaltyCountPatterns(e){const r=e[1];s(r<=3*this.size);const t=r>0&&e[2]==r&&e[3]==3*r&&e[4]==r&&e[5]==r;return(t&&e[0]>=4*r&&e[6]>=r?1:0)+(t&&e[6]>=4*r&&e[0]>=r?1:0)}finderPenaltyTerminateAndCount(e,r,t){return e&&(this.finderPenaltyAddHistory(r,t),r=0),r+=this.size,this.finderPenaltyAddHistory(r,t),this.finderPenaltyCountPatterns(t)}finderPenaltyAddHistory(e,r){0==r[0]&&(e+=this.size),r.pop(),r.unshift(e)}};function t(e,r,t){if(r<0||r>31||e>>>r!=0)throw new RangeError("Value out of range");for(let a=r-1;a>=0;a--)t.push(e>>>a&1)}function a(e,r){return!!(e>>>r&1)}function s(e){if(!e)throw new Error("Assertion error")}r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;const l=class e{constructor(e,r,t){if(this.mode=e,this.numChars=r,this.bitData=t,r<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}static makeBytes(r){let a=[];for(const e of r)t(e,8,a);return new e(e.Mode.BYTE,r.length,a)}static makeNumeric(r){if(!e.isNumeric(r))throw new RangeError("String contains non-numeric characters");let a=[];for(let e=0;e<r.length;){const s=Math.min(r.length-e,3);t(parseInt(r.substring(e,e+s),10),3*s+1,a),e+=s}return new e(e.Mode.NUMERIC,r.length,a)}static makeAlphanumeric(r){if(!e.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a,s=[];for(a=0;a+2<=r.length;a+=2){let l=45*e.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a));l+=e.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a+1)),t(l,11,s)}return a<r.length&&t(e.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a)),6,s),new e(e.Mode.ALPHANUMERIC,r.length,s)}static makeSegments(r){return""==r?[]:e.isNumeric(r)?[e.makeNumeric(r)]:e.isAlphanumeric(r)?[e.makeAlphanumeric(r)]:[e.makeBytes(e.toUtf8ByteArray(r))]}static makeEci(r){let a=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)t(r,8,a);else if(r<16384)t(2,2,a),t(r,14,a);else{if(!(r<1e6))throw new RangeError("ECI assignment value out of range");t(6,3,a),t(r,21,a)}return new e(e.Mode.ECI,0,a)}static isNumeric(r){return e.NUMERIC_REGEX.test(r)}static isAlphanumeric(r){return e.ALPHANUMERIC_REGEX.test(r)}getData(){return this.bitData.slice()}static getTotalBits(e,r){let t=0;for(const a of e){const e=a.mode.numCharCountBits(r);if(a.numChars>=1<<e)return 1/0;t+=4+e+a.bitData.length}return t}static toUtf8ByteArray(e){e=encodeURI(e);let r=[];for(let t=0;t<e.length;t++)"%"!=e.charAt(t)?r.push(e.charCodeAt(t)):(r.push(parseInt(e.substring(t+1,t+3),16)),t+=2);return r}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let n=l;e.QrSegment=l})(A||(A={})),(e=>{const r=class{constructor(e,r){this.ordinal=e,this.formatBits=r}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})((R=A||(A={})).QrCode||(R.QrCode={})),(e=>{(e=>{const r=class{constructor(e,r){this.modeBits=e,this.numBitsCharCount=r}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(e.QrSegment||(e.QrSegment={}))})(A||(A={}));var B=A,U={L:B.QrCode.Ecc.LOW,M:B.QrCode.Ecc.MEDIUM,Q:B.QrCode.Ecc.QUARTILE,H:B.QrCode.Ecc.HIGH},O=128,$="L",H="#FFFFFF",W="#000000",Q=!1,q=1;
/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */function V(e,r=0){const t=[];return e.forEach(function(e,a){let s=null;e.forEach(function(l,n){if(!l&&null!==s)return t.push(`M${s+r} ${a+r}h${n-s}v1H${s+r}z`),void(s=null);if(n!==e.length-1)l&&null===s&&(s=n);else{if(!l)return;null===s?t.push(`M${n+r},${a+r} h1v1H${n+r}z`):t.push(`M${s+r},${a+r} h${n+1-s}v1H${s+r}z`)}})}),t.join("")}function Y(e,r){return e.slice().map((e,t)=>t<r.y||t>=r.y+r.h?e:e.map((e,t)=>(t<r.x||t>=r.x+r.w)&&e))}function G({value:e,level:r,minVersion:t,includeMargin:a,marginSize:s,imageSettings:n,size:d,boostLevel:i}){let o=l.useMemo(()=>{const a=(Array.isArray(e)?e:[e]).reduce((e,r)=>(e.push(...B.QrSegment.makeSegments(r)),e),[]);return B.QrCode.encodeSegments(a,U[r],t,void 0,void 0,i)},[e,r,t,i]);const{cells:c,margin:m,numCells:g,calculatedImageSettings:x}=l.useMemo(()=>{let e=o.getModules();const r=function(e,r){return null!=r?Math.max(Math.floor(r),0):e?4:0}(a,s),t=e.length+2*r,l=function(e,r,t,a){if(null==a)return null;const s=e.length+2*t,l=Math.floor(.1*r),n=s/r,d=(a.width||l)*n,i=(a.height||l)*n,o=null==a.x?e.length/2-d/2:a.x*n,c=null==a.y?e.length/2-i/2:a.y*n,m=null==a.opacity?1:a.opacity;let g=null;if(a.excavate){let e=Math.floor(o),r=Math.floor(c);g={x:e,y:r,w:Math.ceil(d+o-e),h:Math.ceil(i+c-r)}}return{x:o,y:c,h:i,w:d,excavation:g,opacity:m,crossOrigin:a.crossOrigin}}(e,d,r,n);return{cells:e,margin:r,numCells:t,calculatedImageSettings:l}},[o,d,n,a,s]);return{qrcode:o,margin:m,cells:c,numCells:g,calculatedImageSettings:x}}var K=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();l.forwardRef(function(e,r){const t=e,{value:a,size:s=O,level:n=$,bgColor:d=H,fgColor:i=W,includeMargin:o=Q,minVersion:c=q,boostLevel:m,marginSize:g,imageSettings:x}=t,u=z(t,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:h}=u,b=z(u,["style"]),y=null==x?void 0:x.src,p=l.useRef(null),v=l.useRef(null),f=l.useCallback(e=>{p.current=e,"function"==typeof r?r(e):r&&(r.current=e)},[r]),[k,j]=l.useState(!1),{margin:N,cells:w,numCells:_,calculatedImageSettings:C}=G({value:a,level:n,minVersion:c,boostLevel:m,includeMargin:o,marginSize:g,imageSettings:x,size:s});l.useEffect(()=>{if(null!=p.current){const e=p.current,r=e.getContext("2d");if(!r)return;let t=w;const a=v.current,l=null!=C&&null!==a&&a.complete&&0!==a.naturalHeight&&0!==a.naturalWidth;l&&null!=C.excavation&&(t=Y(w,C.excavation));const n=window.devicePixelRatio||1;e.height=e.width=s*n;const o=s/_*n;r.scale(o,o),r.fillStyle=d,r.fillRect(0,0,_,_),r.fillStyle=i,K?r.fill(new Path2D(V(t,N))):w.forEach(function(e,t){e.forEach(function(e,a){e&&r.fillRect(a+N,t+N,1,1)})}),C&&(r.globalAlpha=C.opacity),l&&r.drawImage(a,C.x+N,C.y+N,C.w,C.h)}}),l.useEffect(()=>{j(!1)},[y]);const S=D({height:s,width:s},h);let M=null;return null!=y&&(M=l.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{j(!0)},ref:v,crossOrigin:null==C?void 0:C.crossOrigin})),l.createElement(l.Fragment,null,l.createElement("canvas",D({style:S,height:s,width:s,ref:f,role:"img"},b)),M)}).displayName="QRCodeCanvas";var J=l.forwardRef(function(e,r){const t=e,{value:a,size:s=O,level:n=$,bgColor:d=H,fgColor:i=W,includeMargin:o=Q,minVersion:c=q,boostLevel:m,title:g,marginSize:x,imageSettings:u}=t,h=z(t,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:y,numCells:p,calculatedImageSettings:v}=G({value:a,level:n,minVersion:c,boostLevel:m,includeMargin:o,marginSize:x,imageSettings:u,size:s});let f=y,k=null;null!=u&&null!=v&&(null!=v.excavation&&(f=Y(y,v.excavation)),k=l.createElement("image",{href:u.src,height:v.h,width:v.w,x:v.x+b,y:v.y+b,preserveAspectRatio:"none",opacity:v.opacity,crossOrigin:v.crossOrigin}));const j=V(f,b);return l.createElement("svg",D({height:s,width:s,viewBox:`0 0 ${p} ${p}`,ref:r,role:"img"},h),!!g&&l.createElement("title",null,g),l.createElement("path",{fill:d,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),l.createElement("path",{fill:i,d:j,shapeRendering:"crispEdges"}),k)});function X(){var l,d,i,c,j,C,A,R,L,E,F,I,T,D,z,B,U,O,$,H,W,Q,q,V,Y,G,K,X,Z,ee,re,te,ae,se,le,ne,de,ie;const oe=e(),{user:ce,refreshUser:me}=g(),{companyName:ge,companyLogo:xe,loginBackground:ue,favicon:he,footerText:be,primaryColor:ye,fetchBranding:pe,updateBranding:ve}=x(),[fe,ke]=n(),je=["branding","general","billing","service_change","radius","notifications","security","account","license","cluster","system","ssl"],Ne=fe.get("tab"),we=Ne&&je.includes(Ne)?Ne:"branding",[_e,Ce]=s.useState(we);s.useEffect(()=>{const e=fe.get("tab");e&&je.includes(e)&&e!==_e&&Ce(e)},[fe]);const[Se,Me]=s.useState({}),[Pe,Ae]=s.useState(!1),Re=s.useRef(null),Le=s.useRef(null),Ee=s.useRef(null),[Fe,Ie]=s.useState(!1),[Te,De]=s.useState(!1),[ze,Be]=s.useState(!1),[Ue,Oe]=s.useState(null),[$e,He]=s.useState(""),[We,Qe]=s.useState(""),[qe,Ve]=s.useState(""),[Ye,Ge]=s.useState(!1),[Ke,Je]=s.useState(!1),[Xe,Ze]=s.useState(!1),[er,rr]=s.useState(""),[tr,ar]=s.useState(""),[sr,lr]=s.useState(""),[nr,dr]=s.useState(""),[ir,or]=s.useState(""),[cr,mr]=s.useState(!1),[gr,xr]=s.useState(null),ur=s.useRef(null),[hr,br]=s.useState([]),[yr,pr]=s.useState(!1),[vr,fr]=s.useState(""),[kr,jr]=s.useState([]),[Nr,wr]=s.useState(!1),[_r,Cr]=s.useState(""),[Sr,Mr]=s.useState(!1),[Pr,Ar]=s.useState(null),[Rr,Lr]=s.useState(""),[Er,Fr]=s.useState(""),[Ir,Tr]=s.useState([]),[Dr,zr]=s.useState(!1),Br=s.useRef(null),[Ur,Or]=s.useState(null),[$r,Hr]=s.useState(!1),[Wr,Qr]=s.useState(null),{data:qr,isLoading:Vr}=r({queryKey:["settings"],queryFn:()=>u.get("/settings").then(e=>e.data.items||[])}),{data:Yr}=r({queryKey:["timezones"],queryFn:()=>u.get("/settings/timezones").then(e=>e.data.data||[])});s.useEffect(()=>{if(qr){const e={};qr.forEach(r=>{e[r.key]=r.value}),Me(e),Ae(!1)}},[qr]),s.useEffect(()=>{"notifications"===_e&&(vt(),ft())},[_e]);const Gr=t({mutationFn:e=>u.put("/settings/bulk",{settings:e}),onSuccess:()=>{oe.invalidateQueries(["settings"]),Ae(!1),Se.system_timezone&&v(Se.system_timezone),N.success("Settings saved successfully")}}),{data:Kr,refetch:Jr}=r({queryKey:["2fa-status"],queryFn:()=>u.get("/auth/2fa/status").then(e=>e.data.data),enabled:"account"===_e}),Xr=t({mutationFn:()=>u.post("/auth/2fa/setup"),onSuccess:e=>{Oe(e.data.data)},onError:e=>{var r,t;N.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to setup 2FA")}}),Zr=t({mutationFn:e=>u.post("/auth/2fa/verify",{code:e}),onSuccess:()=>{N.success("2FA enabled successfully!"),Oe(null),He(""),Jr(),me()},onError:e=>{var r,t;N.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Invalid code")}}),et=t({mutationFn:e=>u.post("/auth/2fa/disable",e),onSuccess:()=>{N.success("2FA disabled successfully"),Qe(""),Ve(""),Jr(),me()},onError:e=>{var r,t;N.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to disable 2FA")}}),rt=(e,r)=>{Me(t=>({...t,[e]:r})),Ae(!0)},tt=()=>{const e=Object.entries(Se).map(([e,r])=>({key:e,value:String(r)}));Gr.mutate(e)},at=async()=>{try{Hr(!0),Qr(null);const e=await f.getStatus();Or(e.data)}catch(e){Qr("Failed to get tunnel status")}finally{Hr(!1)}},{data:st,isLoading:lt,refetch:nt}=r({queryKey:["license",_e],queryFn:()=>u.get("/license").then(e=>e.data.data),enabled:"license"===_e,staleTime:0,refetchOnMount:"always"}),{data:dt,refetch:it}=r({queryKey:["license-status-detail",_e],queryFn:()=>u.get("/license/status").then(e=>e.data),enabled:"license"===_e,staleTime:0,refetchOnMount:"always"}),ot=t({mutationFn:()=>u.post("/license/revalidate"),onSuccess:e=>{e.data.success?N.success("License validated successfully"):N.error(e.data.message||"License validation failed"),nt(),it(),oe.invalidateQueries(["license-status"])},onError:e=>{var r,t;N.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to validate license")}}),{data:ct,refetch:mt}=r({queryKey:["ssl-status"],queryFn:()=>h.getSSLStatus().then(e=>e.data),enabled:"system"===_e||"ssl"===_e,staleTime:3e4});s.useEffect(()=>{(null==ct?void 0:ct.domain)&&!Rr&&Lr(ct.domain)},[ct]),s.useEffect(()=>{"ssl"!==_e&&"general"!==_e||at()},[_e]);const{data:gt,refetch:xt,isLoading:ut}=r({queryKey:["system-update-check",_e],queryFn:()=>u.get("/system/update/check").then(e=>e.data),enabled:"license"===_e,staleTime:0,refetchOnMount:"always"}),ht=t({mutationFn:()=>u.get("/system/update/check").then(e=>e.data),onSuccess:e=>{e.update_available?N.success(`Update available: v${e.new_version}`):N.success("You are running the latest version"),oe.invalidateQueries(["system-update-check"])},onError:e=>{var r,t;N.error((null==(t=null==(r=e.response)?void 0:r.data)?void 0:t.message)||"Failed to check for updates")}}),{data:bt,isLoading:yt,refetch:pt}=r({queryKey:["system-info",_e],queryFn:()=>k.systemInfo().then(e=>e.data.data),enabled:"system"===_e,staleTime:3e4,refetchOnMount:"always"}),vt=async()=>{try{const e=await u.get("/notifications/proxrad/access");xr(e.data)}catch{}},ft=async(e="")=>{pr(!0);try{const r=await u.get("/notifications/whatsapp/subscribers",{params:{search:e}});r.data.success&&br(r.data.subscribers||[])}catch(r){}pr(!1)};if(Vr)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const kt=e=>{const r=Se[e.key]||"";if("toggle"===e.type){const t="true"===r||"1"===r||!0===r;return a.jsxs("div",{children:[a.jsx("button",{type:"button",onClick:()=>rt(e.key,t?"false":"true"),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(t?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"),children:a.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white dark:bg-gray-800 shadow ring-0 transition duration-200 ease-in-out "+(t?"translate-x-5":"translate-x-0")})}),e.description&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]})}return"timezone"===e.type?a.jsxs("div",{children:[a.jsxs("select",{value:r,onChange:r=>rt(e.key,r.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[a.jsx("option",{value:"",children:"Select timezone..."}),(Yr||[]).map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),e.description&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]}):"select"===e.type?a.jsxs("select",{value:r,onChange:r=>rt(e.key,r.target.value),className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[a.jsx("option",{value:"",children:"Select..."}),e.options.map(e=>a.jsx("option",{value:e,children:e},e))]}):"textarea"===e.type?a.jsx("textarea",{value:r,onChange:r=>rt(e.key,r.target.value),placeholder:e.placeholder,rows:3,className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}):a.jsxs("div",{children:[a.jsx("input",{type:e.type,value:r,onChange:r=>rt(e.key,r.target.value),placeholder:e.placeholder,step:"number"===e.type?"0.01":void 0,className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),e.description&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.description})]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Settings"}),a.jsxs("div",{className:"flex space-x-3",children:[Pe&&a.jsx("button",{onClick:()=>{if(qr){const e={};qr.forEach(r=>{e[r.key]=r.value}),Me(e),Ae(!1)}},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:bg-gray-700",children:"Reset"}),a.jsx("button",{onClick:tt,disabled:!Pe||Gr.isPending,className:"px-4 py-2 text-sm font-medium text-white rounded-md "+(Pe?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:Gr.isPending?"Saving...":"Save Changes"})]})]}),Gr.isSuccess&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 text-green-700 px-4 py-3 rounded",children:"Settings saved successfully!"}),Gr.isError&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Failed to save settings. Please try again."}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:[a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"flex -mb-px",children:[{id:"branding",label:"Branding"},{id:"general",label:"General"},{id:"billing",label:"Billing"},{id:"service_change",label:"Service Change"},{id:"radius",label:"RADIUS"},{id:"notifications",label:"Notifications"},{id:"security",label:"Security"},{id:"account",label:"My Account"},{id:"license",label:"License"},{id:"cluster",label:"HA Cluster"},{id:"system",label:"Network"},{id:"ssl",label:"SSL Certificate"}].map(e=>a.jsx("button",{onClick:()=>{return r=e.id,Ce(r),void ke({tab:r},{replace:!0});var r},className:"px-6 py-4 text-sm font-medium border-b-2 "+(_e===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300"),children:e.label},e.id))})}),a.jsx("div",{className:"p-6",children:"branding"===_e?a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name"}),a.jsx("input",{type:"text",value:Se.company_name||"",onChange:e=>rt("company_name",e.target.value),placeholder:"Your Company Name",className:"block w-full max-w-md rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This name appears in the sidebar and login page"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Logo"}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gray-50 dark:bg-gray-700 overflow-hidden",children:xe?a.jsx("img",{src:xe,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):a.jsx(w,{className:"w-12 h-12 text-gray-400"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{ref:Re,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml,image/webp",onChange:async e=>{var r,t,a;const s=null==(r=e.target.files)?void 0:r[0];if(!s)return;if(!["image/png","image/jpeg","image/jpg","image/svg+xml","image/webp"].includes(s.type))return void N.error("Invalid file type. Use PNG, JPG, SVG, or WEBP");if(s.size>2097152)return void N.error("File too large. Maximum size is 2MB");Ie(!0);const l=new FormData;l.append("logo",s);try{const e=await h.uploadLogo(l);e.data.success&&(N.success("Logo uploaded successfully"),ve({company_logo:e.data.data.url}),oe.invalidateQueries(["settings"]))}catch(n){N.error((null==(a=null==(t=n.response)?void 0:t.data)?void 0:a.message)||"Failed to upload logo")}finally{Ie(!1),Re.current&&(Re.current.value="")}},className:"hidden"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=Re.current)?void 0:e.click()},disabled:Fe,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),Fe?"Uploading...":"Upload Logo"]}),xe&&a.jsxs("button",{type:"button",onClick:async()=>{if(xe)try{await h.deleteLogo(),N.success("Logo deleted"),ve({company_logo:""}),oe.invalidateQueries(["settings"])}catch(e){N.error("Failed to delete logo")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[a.jsx(_,{className:"w-4 h-4 mr-2"}),"Remove Logo"]})]}),a.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",a.jsx("strong",{children:"180 x 36 pixels"})," (horizontal logo). PNG with transparent background, max 2MB."]})]})]})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx(S,{className:"w-4 h-4 inline mr-1"}),"Primary Color"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"color",value:Se.primary_color||"#2563eb",onChange:e=>rt("primary_color",e.target.value),className:"w-16 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),a.jsx("input",{type:"text",value:Se.primary_color||"#2563eb",onChange:e=>rt("primary_color",e.target.value),placeholder:"#2563eb",className:"w-32 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("div",{className:"flex gap-2",children:["#2563eb","#10b981","#8b5cf6","#f59e0b","#ef4444","#06b6d4"].map(e=>a.jsx("button",{type:"button",onClick:()=>rt("primary_color",e),className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-600 shadow-sm hover:scale-110 transition-transform",style:{backgroundColor:e},title:e},e))})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used for buttons, links, and accent elements throughout the app"})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Login Page Background"}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-48 h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-800 overflow-hidden",children:ue?a.jsx("img",{src:ue,alt:"Login Background",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-white text-xs",children:"Default Gradient"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{ref:Le,type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:async e=>{var r,t,a;const s=null==(r=e.target.files)?void 0:r[0];if(!s)return;if(s.size>5242880)return void N.error("File too large. Maximum size is 5MB");De(!0);const l=new FormData;l.append("background",s);try{const e=await h.uploadLoginBackground(l);e.data.success&&(N.success("Login background uploaded successfully"),ve({login_background:e.data.data.url}),oe.invalidateQueries(["settings"]))}catch(n){N.error((null==(a=null==(t=n.response)?void 0:t.data)?void 0:a.message)||"Failed to upload background")}finally{De(!1),Le.current&&(Le.current.value="")}},className:"hidden"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=Le.current)?void 0:e.click()},disabled:Te,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),Te?"Uploading...":"Upload Background"]}),ue&&a.jsxs("button",{type:"button",onClick:async()=>{if(ue)try{await h.deleteLoginBackground(),N.success("Login background deleted"),ve({login_background:""}),oe.invalidateQueries(["settings"])}catch(e){N.error("Failed to delete background")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[a.jsx(_,{className:"w-4 h-4 mr-2"}),"Use Default Gradient"]})]}),a.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",a.jsx("strong",{children:"1920 x 1080 pixels"}),". JPG or PNG, max 5MB.",a.jsx("br",{}),"This image appears on the left side of the login page."]})]})]})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Favicon (Browser Tab Icon)"}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center bg-gray-50 dark:bg-gray-700 overflow-hidden",children:he?a.jsx("img",{src:he,alt:"Favicon",className:"w-8 h-8 object-contain"}):a.jsx("span",{className:"text-gray-400 text-xl",children:"ðŸŒ"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{ref:Ee,type:"file",accept:"image/png,image/x-icon,image/svg+xml",onChange:async e=>{var r,t,a;const s=null==(r=e.target.files)?void 0:r[0];if(!s)return;if(s.size>512e3)return void N.error("File too large. Maximum size is 500KB");Be(!0);const l=new FormData;l.append("favicon",s);try{const e=await h.uploadFavicon(l);e.data.success&&(N.success("Favicon uploaded successfully"),ve({favicon:e.data.data.url}),oe.invalidateQueries(["settings"]))}catch(n){N.error((null==(a=null==(t=n.response)?void 0:t.data)?void 0:a.message)||"Failed to upload favicon")}finally{Be(!1),Ee.current&&(Ee.current.value="")}},className:"hidden"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=Ee.current)?void 0:e.click()},disabled:ze,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 w-fit",children:[a.jsx(w,{className:"w-4 h-4 mr-2"}),ze?"Uploading...":"Upload Favicon"]}),he&&a.jsxs("button",{type:"button",onClick:async()=>{if(he)try{await h.deleteFavicon(),N.success("Favicon deleted"),ve({favicon:""}),oe.invalidateQueries(["settings"])}catch(e){N.error("Failed to delete favicon")}},className:"inline-flex items-center px-4 py-2 text-sm font-medium text-red-600 bg-white dark:bg-gray-700 border border-red-300 dark:border-red-500 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 w-fit",children:[a.jsx(_,{className:"w-4 h-4 mr-2"}),"Remove Favicon"]})]}),a.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Recommended: ",a.jsx("strong",{children:"32 x 32 pixels"}),". PNG, ICO, or SVG, max 500KB."]})]})]})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Footer Copyright Text"}),a.jsx("input",{type:"text",value:Se.footer_text||"",onChange:e=>rt("footer_text",e.target.value),placeholder:"Â© 2026 Your Company Name. All rights reserved.",className:"block w-full max-w-lg rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Appears at the bottom of the login page"})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Login Page Features"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Tagline (bottom of left panel)"}),a.jsx("input",{type:"text",value:Se.login_tagline||"",onChange:e=>rt("login_tagline",e.target.value),placeholder:"High Performance ISP Management Solution",className:"block w-full max-w-lg rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:"false"!==Se.show_login_features,onChange:e=>rt("show_login_features",e.target.checked?"true":"false"),className:"sr-only"}),a.jsx("div",{className:"w-10 h-6 rounded-full transition-colors "+("false"!==Se.show_login_features?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"),children:a.jsx("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform "+("false"!==Se.show_login_features?"translate-x-5":"translate-x-1")})})]}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show feature boxes on login page"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 1 Title"}),a.jsx("input",{type:"text",value:Se.login_feature_1_title||"",onChange:e=>rt("login_feature_1_title",e.target.value),placeholder:"PPPoE Management",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 1 Description"}),a.jsx("input",{type:"text",value:Se.login_feature_1_desc||"",onChange:e=>rt("login_feature_1_desc",e.target.value),placeholder:"Complete subscriber and session management...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 2 Title"}),a.jsx("input",{type:"text",value:Se.login_feature_2_title||"",onChange:e=>rt("login_feature_2_title",e.target.value),placeholder:"Bandwidth Control",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 2 Description"}),a.jsx("input",{type:"text",value:Se.login_feature_2_desc||"",onChange:e=>rt("login_feature_2_desc",e.target.value),placeholder:"FUP quotas, time-based speed control...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 3 Title"}),a.jsx("input",{type:"text",value:Se.login_feature_3_title||"",onChange:e=>rt("login_feature_3_title",e.target.value),placeholder:"MikroTik Integration",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Feature 3 Description"}),a.jsx("input",{type:"text",value:Se.login_feature_3_desc||"",onChange:e=>rt("login_feature_3_desc",e.target.value),placeholder:"Seamless RADIUS and API integration...",className:"block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]})]}),a.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Sidebar Preview"}),a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 max-w-xs",children:a.jsx("div",{className:"flex items-center gap-3",children:xe?a.jsx("img",{src:xe,alt:"Logo",className:"h-10 object-contain"}):a.jsx("span",{className:"text-lg font-bold",style:{color:Se.primary_color||"#2563eb"},children:Se.company_name||"Your Company Name"})})})})]})]}):"account"===_e?a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Account Information"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Username"}),a.jsx("p",{className:"font-medium",children:null==ce?void 0:ce.username})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),a.jsx("p",{className:"font-medium",children:(null==ce?void 0:ce.email)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Full Name"}),a.jsx("p",{className:"font-medium",children:(null==ce?void 0:ce.full_name)||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Role"}),a.jsx("p",{className:"font-medium capitalize",children:null==ce?void 0:ce.user_type})]})]})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Two-Factor Authentication"}),(null==Kr?void 0:Kr.enabled)?a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsx("span",{className:"font-medium text-green-800",children:"2FA is enabled"})]}),a.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Your account is protected with two-factor authentication."}),a.jsxs("div",{className:"border-t border-green-200 pt-4 mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Disable 2FA"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"password",placeholder:"Current password",value:We,onChange:e=>Qe(e.target.value),className:"block w-full max-w-xs rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("input",{type:"text",placeholder:"2FA code",value:qe,onChange:e=>Ve(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"block w-full max-w-xs rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("button",{onClick:()=>et.mutate({password:We,code:qe}),disabled:et.isPending||!We||6!==qe.length,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50",children:et.isPending?"Disabling...":"Disable 2FA"})]})]})]}):Ue?a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-4",children:"Setup Two-Factor Authentication"}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[a.jsxs("div",{className:"flex-shrink-0",children:[a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"1. Scan this QR code with your authenticator app"}),a.jsx("img",{src:Ue.qr_code,alt:"2FA QR Code",className:"w-48 h-48 border rounded"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Or enter this code manually:"}),a.jsx("code",{className:"block bg-white px-3 py-2 rounded border text-sm font-mono mb-4 break-all",children:Ue.secret}),a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"2. Enter the 6-digit code from your app:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"000000",value:$e,onChange:e=>He(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"block w-32 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-center text-lg tracking-widest"}),a.jsx("button",{onClick:()=>Zr.mutate($e),disabled:Zr.isPending||6!==$e.length,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:Zr.isPending?"Verifying...":"Verify & Enable"})]})]})]}),a.jsx("button",{onClick:()=>{Oe(null),He("")},className:"mt-4 text-sm text-blue-600 hover:text-blue-800",children:"Cancel setup"})]}):a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"2FA is not enabled"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add an extra layer of security to your account by enabling two-factor authentication. You'll need an authenticator app like Google Authenticator or Authy."}),a.jsx("button",{onClick:()=>Xr.mutate(),disabled:Xr.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:Xr.isPending?"Setting up...":"Enable 2FA"})]})]})]}):"notifications"===_e?a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Email Notifications (SMTP)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Host"}),a.jsx("input",{type:"text",value:Se.smtp_host||"",onChange:e=>rt("smtp_host",e.target.value),placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Port"}),a.jsx("input",{type:"number",value:Se.smtp_port||"",onChange:e=>rt("smtp_port",e.target.value),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Username"}),a.jsx("input",{type:"text",value:Se.smtp_username||"",onChange:e=>rt("smtp_username",e.target.value),placeholder:"user@gmail.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMTP Password"}),a.jsx("input",{type:"password",value:Se.smtp_password||"",onChange:e=>rt("smtp_password",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Name"}),a.jsx("input",{type:"text",value:Se.smtp_from_name||"",onChange:e=>rt("smtp_from_name",e.target.value),placeholder:"Company Name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Email"}),a.jsx("input",{type:"email",value:Se.smtp_from_email||"",onChange:e=>rt("smtp_from_email",e.target.value),placeholder:"noreply@company.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Email Address"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"email",value:er,onChange:e=>rr(e.target.value),placeholder:"test@example.com",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),a.jsx("button",{onClick:async()=>{var e,r;Ge(!0);try{const e=await u.post("/notifications/test-smtp",{smtp_host:Se.smtp_host,smtp_port:Se.smtp_port,smtp_username:Se.smtp_username,smtp_password:Se.smtp_password,smtp_from_name:Se.smtp_from_name,smtp_from_email:Se.smtp_from_email,test_email:er||Se.notification_email});N.success(e.data.message||"SMTP test successful!")}catch(t){N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"SMTP test failed")}finally{Ge(!1)}},disabled:Ye||!Se.smtp_host,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Ye?"Testing...":"Test SMTP"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"SMS Notifications"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SMS Provider"}),a.jsxs("select",{value:Se.sms_provider||"",onChange:e=>rt("sms_provider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[a.jsx("option",{value:"",children:"Select Provider"}),a.jsx("option",{value:"twilio",children:"Twilio"}),a.jsx("option",{value:"vonage",children:"Vonage (Nexmo)"}),a.jsx("option",{value:"custom",children:"Custom API"})]})]}),"twilio"===Se.sms_provider&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Account SID"}),a.jsx("input",{type:"text",value:Se.sms_twilio_sid||"",onChange:e=>rt("sms_twilio_sid",e.target.value),placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Auth Token"}),a.jsx("input",{type:"password",value:Se.sms_twilio_token||"",onChange:e=>rt("sms_twilio_token",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Twilio Phone Number"}),a.jsx("input",{type:"text",value:Se.sms_twilio_from||"",onChange:e=>rt("sms_twilio_from",e.target.value),placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]})]}),"vonage"===Se.sms_provider&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vonage API Key"}),a.jsx("input",{type:"text",value:Se.sms_vonage_key||"",onChange:e=>rt("sms_vonage_key",e.target.value),placeholder:"API Key",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vonage API Secret"}),a.jsx("input",{type:"password",value:Se.sms_vonage_secret||"",onChange:e=>rt("sms_vonage_secret",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sender Name/Number"}),a.jsx("input",{type:"text",value:Se.sms_vonage_from||"",onChange:e=>rt("sms_vonage_from",e.target.value),placeholder:"CompanyName or +1234567890",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]})]}),"custom"===Se.sms_provider&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API URL"}),a.jsx("input",{type:"text",value:Se.sms_custom_url||"",onChange:e=>rt("sms_custom_url",e.target.value),placeholder:"https://api.provider.com/sms/send",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"HTTP Method"}),a.jsxs("select",{value:Se.sms_custom_method||"POST",onChange:e=>rt("sms_custom_method",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[a.jsx("option",{value:"POST",children:"POST"}),a.jsx("option",{value:"GET",children:"GET"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Request Body (JSON)"}),a.jsx("textarea",{value:Se.sms_custom_body||"",onChange:e=>rt("sms_custom_body",e.target.value),placeholder:'{"to": "{{to}}", "message": "{{message}}"}',rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white font-mono text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Use ","{{to}}"," and ","{{message}}"," as placeholders"]})]})]}),Se.sms_provider&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Phone Number"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:tr,onChange:e=>ar(e.target.value),placeholder:"+1234567890",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),a.jsx("button",{onClick:async()=>{var e,r;Je(!0);try{const e=await u.post("/notifications/test-sms",{sms_provider:Se.sms_provider,sms_twilio_sid:Se.sms_twilio_sid,sms_twilio_token:Se.sms_twilio_token,sms_twilio_from:Se.sms_twilio_from,sms_vonage_key:Se.sms_vonage_key,sms_vonage_secret:Se.sms_vonage_secret,sms_vonage_from:Se.sms_vonage_from,sms_custom_url:Se.sms_custom_url,sms_custom_method:Se.sms_custom_method,sms_custom_body:Se.sms_custom_body,test_phone:tr});N.success(e.data.message||"SMS test successful!")}catch(t){N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"SMS test failed")}finally{Je(!1)}},disabled:Ke||!tr,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Ke?"Testing...":"Test SMS"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"WhatsApp Notifications"}),a.jsxs("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Provider"}),a.jsxs("select",{value:Se.whatsapp_provider||"ultramsg",onChange:e=>{return r="whatsapp_provider",t=e.target.value,Me(e=>({...e,[r]:t})),void u.put("/settings/bulk",{settings:[{key:r,value:String(t)}]}).then(()=>oe.invalidateQueries(["settings"])).catch(()=>{});var r,t},className:"w-full sm:w-64 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white",children:[a.jsx("option",{value:"ultramsg",children:"Ultramsg"}),a.jsx("option",{value:"proxrad",children:"ProxRad WhatsApp"})]})]}),"ultramsg"===(Se.whatsapp_provider||"ultramsg")?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Get your Instance ID and Token from ",a.jsx("a",{href:"https://ultramsg.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ultramsg.com"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Instance ID"}),a.jsx("input",{type:"text",value:Se.whatsapp_instance_id||"",onChange:e=>rt("whatsapp_instance_id",e.target.value),placeholder:"instanceXXXXX",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Token"}),a.jsx("input",{type:"password",value:Se.whatsapp_token||"",onChange:e=>rt("whatsapp_token",e.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Phone Number"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:tr,onChange:e=>ar(e.target.value),placeholder:"+1234567890 (with country code)",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),a.jsx("button",{onClick:async()=>{var e,r;Ze(!0);try{const e=await u.post("/notifications/test-whatsapp",{whatsapp_instance_id:Se.whatsapp_instance_id,whatsapp_token:Se.whatsapp_token,test_phone:tr});N.success(e.data.message||"WhatsApp test successful!")}catch(t){N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"WhatsApp test failed")}finally{Ze(!1)}},disabled:Xe||!Se.whatsapp_instance_id||!Se.whatsapp_token,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Xe?"Testing...":"Test WhatsApp"})]})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Link your WhatsApp number via ProxRad (proxsms.com). Scan the QR code below to connect your number."}),gr&&a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border "+("subscribed"===gr.type?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"expired"===gr.type?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700"),children:[a.jsx("span",{className:"text-lg mt-0.5",children:"subscribed"===gr.type?"âœ…":"expired"===gr.type?"ðŸ”’":"â³"}),a.jsxs("div",{children:["subscribed"===gr.type&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Subscribed"}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Active until ",new Date(gr.expires_at).toLocaleDateString()]})]}),"trial"===gr.type&&gr.trial_ends&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Trial Mode"}),a.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:gr.trial_hours_left>0?`${gr.trial_hours_left} hour${1!==gr.trial_hours_left?"s":""} remaining â€” contact your provider to subscribe`:"Trial ending soon"})]}),"trial"===gr.type&&!gr.trial_ends&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"Trial Mode"}),a.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"2-day trial starts when you link your number"})]}),"expired"===gr.type&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Trial / Subscription Expired"}),a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Sending is blocked. Contact your provider to subscribe."})]})]})]}),Se.proxrad_account_unique&&!cr&&a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 text-xl",children:"âœ…"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"WhatsApp Account Linked"}),a.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:sr||Se.proxrad_phone||Se.proxrad_account_unique})]}),a.jsx("button",{onClick:async()=>{var e,r;try{await u.delete("/notifications/proxrad/unlink"),rt("proxrad_account_unique",""),rt("proxrad_phone",""),lr(""),xr(null),N.success("WhatsApp account unlinked")}catch(t){N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Failed to unlink account")}},className:"text-xs text-red-500 hover:text-red-700 font-medium",children:"Unlink"})]}),cr&&a.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 border border-blue-200 dark:border-blue-700 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"ðŸ“± Scan with WhatsApp to link your number"}),nr?a.jsx("img",{src:nr,alt:"WhatsApp QR Code",className:"w-48 h-48 border border-gray-200 rounded-lg bg-white p-1",onError:e=>{e.target.style.display="none"}}):a.jsx("div",{className:"w-48 h-48 flex items-center justify-center",children:a.jsx("span",{className:"animate-spin inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"})}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 text-center",children:"Open WhatsApp â†’ Linked Devices â†’ Link a Device â†’ Scan this QR"}),a.jsx("p",{className:"text-xs text-gray-400 animate-pulse",children:"Waiting for connection..."}),a.jsx("button",{onClick:()=>{clearInterval(ur.current),mr(!1),dr(""),or("")},className:"text-xs text-red-500 hover:text-red-700 underline",children:"Cancel"})]}),!cr&&!Se.proxrad_account_unique&&a.jsx("div",{className:"flex gap-2 flex-wrap",children:a.jsx("button",{onClick:async()=>{var e,r;mr(!0),dr(""),or("");try{const e=await u.get("/notifications/proxrad/create-link");dr(e.data.qr_image_url),or(e.data.info_url),ur.current=setInterval(async()=>{try{const r=await u.get(`/notifications/proxrad/link-status?info_url=${encodeURIComponent(e.data.info_url)}`);r.data.connected&&(clearInterval(ur.current),mr(!1),dr(""),or(""),rt("proxrad_account_unique",r.data.unique),lr(r.data.phone||r.data.unique),vt(),N.success("WhatsApp account linked successfully!"))}catch{}},3e3)}catch(t){mr(!1),N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Failed to create WhatsApp link")}},className:"px-5 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 flex items-center gap-2",children:"ðŸ“± Link via QR Code"})}),Se.proxrad_account_unique&&!cr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Test Phone Number"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:tr,onChange:e=>ar(e.target.value),placeholder:"+1234567890",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white"}),a.jsx("button",{onClick:async()=>{var e,r;Ze(!0);try{const e=await u.post("/notifications/proxrad/test-send",{test_phone:tr});N.success(e.data.message||"Test message sent!")}catch(t){N.error((null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Test send failed")}finally{Ze(!1)}},disabled:Xe||!tr,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:Xe?"Testing...":"Test Send"})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:"ðŸ“± Send WhatsApp to Subscribers"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Select subscribers and send a WhatsApp message directly, or manage auto-notification settings."}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:"Select Subscribers"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[hr.length," with phone",hr.filter(e=>e.whatsapp_notifications).length>0&&a.jsxs("span",{className:"ml-2 text-green-600 dark:text-green-400 font-medium",children:["ðŸ”” ",hr.filter(e=>e.whatsapp_notifications).length," notif ON"]})]})]}),a.jsxs("label",{className:"flex items-center gap-2 mb-3 cursor-pointer",children:[a.jsx("div",{onClick:()=>{wr(!Nr),jr([])},className:"relative w-10 h-5 rounded-full transition-colors "+(Nr?"bg-green-500":"bg-gray-300 dark:bg-gray-600"),children:a.jsx("div",{className:"absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform "+(Nr?"translate-x-5":"translate-x-0.5")})}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Send to all subscribers (",hr.length,")"]})]}),!Nr&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative mb-2",children:[a.jsx("input",{type:"text",value:vr,onChange:e=>{fr(e.target.value),ft(e.target.value)},placeholder:"Search subscribers...",className:"w-full px-3 py-2 pl-8 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white text-sm"}),a.jsx("svg",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),a.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap items-center text-xs",children:[a.jsx("button",{onClick:()=>jr(hr.map(e=>e.id)),className:"text-blue-600 hover:underline",children:"Select all"}),a.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),a.jsx("button",{onClick:()=>jr([]),className:"text-gray-500 hover:underline",children:"Clear"}),a.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),a.jsx("button",{onClick:async()=>{try{await u.post("/notifications/whatsapp/notifications/set-all",{enabled:!0}),br(e=>e.map(e=>({...e,whatsapp_notifications:!0})))}catch(e){}},className:"text-green-600 dark:text-green-400 hover:underline font-medium",children:"ðŸ”” All notif ON"}),a.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),a.jsx("button",{onClick:async()=>{try{await u.post("/notifications/whatsapp/notifications/set-all",{enabled:!1}),br(e=>e.map(e=>({...e,whatsapp_notifications:!1})))}catch(e){}},className:"text-gray-500 dark:text-gray-400 hover:underline font-medium",children:"ðŸ”• All notif OFF"}),kr.length>0&&a.jsxs("span",{className:"text-green-600 font-medium",children:[kr.length," selected"]})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border border-gray-200 dark:border-gray-600 rounded-lg p-2",children:yr?a.jsx("div",{className:"text-center py-4 text-gray-400 text-sm",children:"Loading..."}):0===hr.length?a.jsx("p",{className:"text-center py-4 text-gray-400 text-sm",children:"No subscribers with phone numbers"}):hr.map(e=>a.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 "+(kr.includes(e.id)?"bg-blue-50 dark:bg-blue-900/20":""),children:[a.jsx("input",{type:"checkbox",checked:kr.includes(e.id),onChange:()=>jr(r=>r.includes(e.id)?r.filter(r=>r!==e.id):[...r,e.id]),className:"rounded border-gray-300"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.username}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.phone})]}),a.jsx("button",{onClick:r=>{r.stopPropagation(),(async e=>{Ar(e.id);try{const r=await u.post(`/notifications/whatsapp/subscribers/${e.id}/toggle-notifications`);r.data.success&&br(t=>t.map(t=>t.id===e.id?{...t,whatsapp_notifications:r.data.whatsapp_notifications}:t))}catch(r){}finally{Ar(null)}})(e)},disabled:Pr===e.id,title:e.whatsapp_notifications?"Auto-notif ON â€” click to disable":"Auto-notif OFF â€” click to enable",className:`shrink-0 p-1 rounded-full transition-colors ${e.whatsapp_notifications?"text-green-500 hover:bg-green-100 dark:hover:bg-green-900/30":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"} ${Pr===e.id?"opacity-50 cursor-wait":""}`,children:e.whatsapp_notifications?a.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}):a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9M3 3l18 18"})})})]},e.id))})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2 mb-3",children:"âœ‰ï¸ Compose Message"}),a.jsx("textarea",{value:_r,onChange:e=>Cr(e.target.value),rows:8,placeholder:"Type your message here...\n\nYou can use:\n{username} â€” subscriber username\n{full_name} â€” subscriber full name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-800 dark:text-white resize-none text-sm mb-2"}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("p",{className:"text-xs text-gray-400",children:[_r.length," characters"]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Recipients: ",Nr?`All (${hr.length})`:kr.length]})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:["{username}","{full_name}"].map(e=>a.jsx("button",{onClick:()=>Cr(r=>r+e),className:"text-xs bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-gray-500",children:e},e))}),a.jsx("button",{onClick:async()=>{var e,r;if(!_r.trim())return void N.error("Enter a message");if(!Nr&&0===kr.length)return void N.error("Select at least one subscriber");const t=Nr?hr.length:kr.length;if(confirm(`Send message to ${t} subscriber${1!==t?"s":""}?`)){Mr(!0);try{const e=await u.post("/notifications/whatsapp/send",{message:_r.trim(),send_all:Nr,subscriber_ids:Nr?[]:kr});e.data.success?(N.success(`âœ… Sent to ${e.data.sent} subscribers${e.data.failed>0?`, ${e.data.failed} failed`:""}`),0===e.data.failed&&(Cr(""),jr([]),wr(!1))):N.error(e.data.message||"Send failed")}catch(a){N.error((null==(r=null==(e=null==a?void 0:a.response)?void 0:e.data)?void 0:r.message)||"Failed to send")}Mr(!1)}},disabled:Sr||!_r.trim()||!Nr&&0===kr.length,className:"w-full px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Sr?"Sending...":"ðŸ“¤ Send WhatsApp Message"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:tt,disabled:!Pe||Gr.isPending,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Gr.isPending?"Saving...":"Save Notification Settings"})})]}):"license"===_e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"License Information"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ht.mutate(),disabled:ht.isPending,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:ht.isPending?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-700 dark:text-gray-300 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Check for Updates"]})}),a.jsx("button",{onClick:()=>ot.mutate(),disabled:ot.isPending,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:ot.isPending?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Check License"]})})]})]}),lt?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[(()=>{const e=(null==dt?void 0:dt.license_status)||((null==st?void 0:st.valid)?"active":"blocked"),r={active:{bg:"bg-green-50 dark:bg-green-900/30 border-green-200",text:"text-green-800",subtext:"text-green-700",icon:"text-green-600",label:"License Active",desc:"Your license is valid and active"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200",text:"text-yellow-800",subtext:"text-yellow-700",icon:"text-yellow-600",label:"License Expiring Soon",desc:(null==dt?void 0:dt.warning_message)||"Please renew soon"},grace:{bg:"bg-orange-50 border-orange-200",text:"text-orange-800",subtext:"text-orange-700",icon:"text-orange-600",label:"Grace Period",desc:"License expired - renew now to avoid service interruption"},readonly:{bg:"bg-red-50 dark:bg-red-900/30 border-red-200",text:"text-red-800",subtext:"text-red-700",icon:"text-red-600",label:"Read-Only Mode",desc:"License expired - system is read-only. Renew immediately!"},blocked:{bg:"bg-red-50 dark:bg-red-900/30 border-red-200",text:"text-red-800",subtext:"text-red-700",icon:"text-red-600",label:"License Blocked",desc:(null==st?void 0:st.message)||"License invalid or expired"},unknown:{bg:"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600",text:"text-gray-800",subtext:"text-gray-700",icon:"text-gray-600",label:"Unknown Status",desc:"Unable to determine license status"}},t=r[e]||r.unknown;return a.jsx("div",{className:`rounded-lg p-4 border ${t.bg}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:`flex-shrink-0 ${t.icon}`,children:"active"===e?a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}):"warning"===e?a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:`font-medium ${t.text}`,children:t.label}),(null==dt?void 0:dt.read_only)&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-red-100 text-red-800 rounded",children:"READ-ONLY"})]}),a.jsx("p",{className:`text-sm ${t.subtext}`,children:t.desc}),void 0!==(null==dt?void 0:dt.days_until_expiry)&&0!==(null==dt?void 0:dt.days_until_expiry)&&a.jsx("p",{className:`text-sm mt-1 font-medium ${t.subtext}`,children:dt.days_until_expiry>0?`${dt.days_until_expiry} days remaining`:`${Math.abs(dt.days_until_expiry)} days overdue`})]})]})})})(),gt&&a.jsx("div",{className:"rounded-lg p-4 border "+(gt.update_available?"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 "+(gt.update_available?"text-blue-600":"text-gray-500"),children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium "+(gt.update_available?"text-blue-800":"text-gray-800"),children:gt.update_available?"Update Available":"System Up to Date"}),a.jsxs("p",{className:"text-sm "+(gt.update_available?"text-blue-700":"text-gray-600"),children:["Current version: v",gt.current_version||"1.0.0",gt.update_available&&` â†’ v${gt.new_version}`]}),gt.update_available&&gt.release_notes&&a.jsx("p",{className:"text-sm text-blue-600 mt-1",children:gt.release_notes})]})]}),gt.update_available&&a.jsx("button",{onClick:()=>{window.location.href="/settings?tab=license"},className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Update Now"})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Service Management"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Restart services if you experience issues after updates or configuration changes."}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:async()=>{N.loading("Restarting API service...",{id:"restart"});try{await h.restartServices(["api"])}catch(e){}N.success("API service is restarting. Page will reload in 10 seconds.",{id:"restart"}),setTimeout(()=>window.location.reload(),1e4)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart API"]}),a.jsxs("button",{onClick:async()=>{N.loading("Restarting all services...",{id:"restart"});try{await h.restartServices(["all"])}catch(e){}N.success("All services are restarting. Page will reload in 15 seconds.",{id:"restart"}),setTimeout(()=>window.location.reload(),15e3)},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Restart All Services"]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"License Details"})}),a.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"License Key"}),a.jsx("span",{className:"font-mono text-sm",children:(null==st?void 0:st.license_key)||"-"})]}),a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Customer Name"}),a.jsx("span",{className:"font-medium",children:(null==st?void 0:st.customer_name)||"-"})]}),a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Plan / Tier"}),a.jsx("span",{className:"font-medium capitalize",children:(null==st?void 0:st.tier)||"-"})]}),a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Max Subscribers"}),a.jsx("span",{className:"font-medium",children:(null==(l=null==st?void 0:st.max_subscribers)?void 0:l.toLocaleString())||"-"})]}),a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"License Type"}),a.jsx("span",{className:"font-medium",children:(null==st?void 0:st.is_lifetime)?"Lifetime":"Subscription"})]}),!(null==st?void 0:st.is_lifetime)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Expires At"}),a.jsx("span",{className:"font-medium",children:(null==st?void 0:st.expires_at)?new Date(st.expires_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),a.jsxs("div",{className:"px-4 py-3 flex justify-between",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Days Remaining"}),a.jsx("span",{className:"font-medium "+(((null==dt?void 0:dt.days_until_expiry)||(null==st?void 0:st.days_remaining)||0)<=0||((null==dt?void 0:dt.days_until_expiry)||(null==st?void 0:st.days_remaining)||0)<=7?"text-red-600":((null==dt?void 0:dt.days_until_expiry)||(null==st?void 0:st.days_remaining)||0)<=14?"text-yellow-600":"text-green-600"),children:void 0!==(null==dt?void 0:dt.days_until_expiry)?dt.days_until_expiry>0?`${dt.days_until_expiry} days`:`${Math.abs(dt.days_until_expiry)} days overdue`:void 0!==(null==st?void 0:st.days_remaining)?`${st.days_remaining} days`:"-"})]})]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Need to upgrade or renew?"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Contact support to upgrade your plan or renew your license."})]})]})]}):"cluster"===_e?a.jsx(M,{}):"system"===_e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"System Information"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Hardware specifications and system health"})]}),a.jsx("button",{onClick:()=>pt(),disabled:yt,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600",children:yt?"Loading...":"Refresh"})]}),yt?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):bt?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:a.jsx(b,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"CPU"})]}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[null==(d=bt.cpu)?void 0:d.cores," Cores"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",title:null==(i=bt.cpu)?void 0:i.model,children:null==(c=bt.cpu)?void 0:c.model}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Usage"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[null==(j=bt.cpu)?void 0:j.usage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full "+((null==(C=bt.cpu)?void 0:C.usage)>80?"bg-red-500":(null==(A=bt.cpu)?void 0:A.usage)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min((null==(R=bt.cpu)?void 0:R.usage)||0,100)}%`}})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Memory"})]}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[null==(L=bt.memory)?void 0:L.total_gb," GB"]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round((null==(E=bt.memory)?void 0:E.used_mb)/1024*10)/10," GB used"]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Usage"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[null==(F=bt.memory)?void 0:F.usage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full "+((null==(I=bt.memory)?void 0:I.usage)>80?"bg-red-500":(null==(T=bt.memory)?void 0:T.usage)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min((null==(D=bt.memory)?void 0:D.usage)||0,100)}%`}})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Storage"})]}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[null==(z=bt.disk)?void 0:z.total_gb," GB"]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[null==(U=null==(B=bt.disk)?void 0:B.type)?void 0:U.toUpperCase()," â€¢ ",null==(O=bt.disk)?void 0:O.free_gb," GB free"]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Usage"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[null==($=bt.disk)?void 0:$.usage,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full "+((null==(H=bt.disk)?void 0:H.usage)>80?"bg-red-500":(null==(W=bt.disk)?void 0:W.usage)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min((null==(Q=bt.disk)?void 0:Q.usage)||0,100)}%`}})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Capacity"})]}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:null==(V=null==(q=bt.capacity)?void 0:q.current_subscribers)?void 0:V.toLocaleString()}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["of ",null==(G=null==(Y=bt.capacity)?void 0:Y.estimated_max)?void 0:G.toLocaleString()," max subscribers"]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Usage"}),a.jsxs("span",{className:"font-medium "+("critical"===(null==(K=bt.capacity)?void 0:K.status)?"text-red-600":"warning"===(null==(X=bt.capacity)?void 0:X.status)?"text-yellow-600":"text-green-600"),children:[null==(Z=bt.capacity)?void 0:Z.usage_percent,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full "+("critical"===(null==(ee=bt.capacity)?void 0:ee.status)?"bg-red-500":"warning"===(null==(re=bt.capacity)?void 0:re.status)?"bg-yellow-500":"moderate"===(null==(te=bt.capacity)?void 0:te.status)?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min((null==(ae=bt.capacity)?void 0:ae.usage_percent)||0,100)}%`}})})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Operating System"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"OS"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:null==(se=bt.os)?void 0:se.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Version"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:null==(le=bt.os)?void 0:le.version})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uptime"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:null==(ne=bt.os)?void 0:ne.uptime})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CPU Speed"}),a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[(null==(de=bt.cpu)?void 0:de.speed)||"N/A"," MHz"]})]})]})]}),a.jsx(P,{})]}):a.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Failed to load system information"})]}):"ssl"===_e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(y,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Custom Domain & SSL Certificate"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Point your domain to this server and get a free HTTPS certificate from Let's Encrypt"})]})]}),(null==ct?void 0:ct.cert_exists)&&a.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-2",children:[a.jsx(m,{className:"w-4 h-4 text-green-600 dark:text-green-400 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["SSL active â€” panel accessible at ",a.jsxs("strong",{children:["https://",ct.domain]})]})]}),(null==ct?void 0:ct.domain)&&!(null==ct?void 0:ct.cert_exists)&&a.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["Domain configured (",a.jsx("strong",{children:ct.domain}),") but no certificate found â€” run installation below."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domain / Subdomain"}),a.jsx("input",{type:"text",value:Rr,onChange:e=>Lr(e.target.value.trim()),placeholder:"panel.yourisp.com",className:"input w-full",disabled:Dr}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Must point to this server's public IP address via DNS"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email (Let's Encrypt)"}),a.jsx("input",{type:"email",value:Er,onChange:e=>Fr(e.target.value.trim()),placeholder:"admin@yourisp.com",className:"input w-full",disabled:Dr}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used for certificate expiry notifications"})]})]}),a.jsx("button",{onClick:async()=>{if(!Rr||!Er)return;Tr([]),zr(!0);const e=new AbortController;Br.current=e;try{const r=g.getState().token,t=new FormData;t.append("domain",Rr),t.append("email",Er);const a=await fetch("/api/settings/ssl-stream",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:t,signal:e.signal});if(!a.ok){const e=await a.text();let r="SSL installation failed";try{r=JSON.parse(e).message||r}catch{}return Tr([`âŒ ${r}`]),void zr(!1)}const s=a.body.getReader(),l=new TextDecoder;let n="";for(;;){const{value:e,done:r}=await s.read();if(r)break;n+=l.decode(e,{stream:!0});const t=n.split("\n");n=t.pop();for(const a of t)if(a.trim())try{const e=JSON.parse(a);"success"===e.status?mt():"error"===e.status||e.msg&&Tr(r=>[...r,e.msg])}catch{}}}catch(r){"AbortError"!==r.name&&Tr(e=>[...e,`âŒ Error: ${r.message}`])}finally{zr(!1),Br.current=null}},disabled:Dr||!Rr||!Er,className:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:Dr?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Installing SSL..."]}):(null==ct?void 0:ct.cert_exists)?"Renew SSL Certificate":"Get SSL Certificate"}),Ir.length>0&&a.jsx("div",{className:"mt-4 bg-gray-900 rounded-lg p-4 font-mono text-xs max-h-80 overflow-y-auto space-y-0.5",children:Ir.map((e,r)=>a.jsx("div",{className:e.includes("âŒ")?"text-red-400":e.includes("âœ…")||e.startsWith("âœ“")?"text-green-400":e.includes("âš ")?"text-yellow-400":"text-gray-300",children:e},r))})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(p,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Remote Access"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Access your panel from anywhere via a secure ProxRad tunnel â€” no port forwarding required"})]})]}),Wr&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:Wr})]}),$r&&!Ur?a.jsxs("div",{className:"flex items-center gap-3 py-4",children:[a.jsxs("svg",{className:"animate-spin w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading tunnel status..."})]}):Ur&&a.jsxs("div",{className:"p-4 rounded-xl border "+(Ur.running?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"),children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 rounded-full "+(Ur.running?"bg-green-500 animate-pulse":"bg-gray-400 dark:bg-gray-500")}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:Ur.running?"Tunnel Active":"Tunnel Inactive"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ur.running?"Remote access is enabled":"Click Enable to start remote access"})]})]}),a.jsx("button",{onClick:Ur.running?async()=>{var e,r;try{Hr(!0),Qr(null),await f.disable(),await at(),N.success("Remote access disabled")}catch(t){const a=(null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Failed to disable remote access";Qr(a),N.error(a)}finally{Hr(!1)}}:async()=>{var e,r;try{Hr(!0),Qr(null),await f.enable(),await at(),N.success("Remote access enabled")}catch(t){const a=(null==(r=null==(e=t.response)?void 0:e.data)?void 0:r.message)||"Failed to enable remote access";Qr(a),N.error(a)}finally{Hr(!1)}},disabled:$r,className:"btn text-sm disabled:opacity-50 disabled:cursor-not-allowed "+(Ur.running?"btn-danger":"btn-primary"),children:$r?"Please wait...":Ur.running?"Disable":"Enable Remote Access"})]}),Ur.running&&Ur.url&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200 dark:border-green-800",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Your Remote Access URL"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"flex-1 px-3 py-2 bg-white dark:bg-gray-800 border border-green-200 dark:border-green-700 rounded-lg text-sm text-green-700 dark:text-green-300 font-mono truncate",children:Ur.url}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ur.url),N.success("URL copied!")},className:"btn btn-secondary text-xs px-3 py-2 whitespace-nowrap",children:"Copy"}),a.jsx("a",{href:Ur.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary text-xs px-3 py-2 whitespace-nowrap",children:"Open"})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Share this URL with anyone who needs access. The connection is secured by Cloudflare."})]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:null==(ie={general:[{key:"company_name",label:"Company Name",type:"text",placeholder:"Your Company Name"},{key:"company_address",label:"Company Address",type:"textarea",placeholder:"Full address"},{key:"company_phone",label:"Phone Number",type:"text",placeholder:"+1 234 567 890"},{key:"company_email",label:"Email",type:"email",placeholder:"info@company.com"},{key:"system_timezone",label:"System Timezone",type:"timezone",description:"Used for FUP reset, bandwidth rules, and all time-based features"},{key:"date_format",label:"Date Format",type:"select",options:["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY","DD-MM-YYYY"]}],billing:[{key:"currency",label:"Currency Code",type:"text",placeholder:"USD"},{key:"currency_symbol",label:"Currency Symbol",type:"text",placeholder:"$"},{key:"tax_rate",label:"Tax Rate (%)",type:"number",placeholder:"0"},{key:"invoice_prefix",label:"Invoice Prefix",type:"text",placeholder:"INV-"},{key:"payment_methods",label:"Payment Methods",type:"text",placeholder:"cash,bank,mpesa"},{key:"auto_generate_invoice",label:"Auto Generate Invoice",type:"toggle"},{key:"invoice_due_days",label:"Invoice Due Days",type:"number",placeholder:"7"}],service_change:[{key:"upgrade_change_service_fee",label:"Upgrade Fee ($)",type:"number",placeholder:"0",description:"Fee charged when subscriber upgrades to a higher-priced service"},{key:"downgrade_change_service_fee",label:"Downgrade Fee ($)",type:"number",placeholder:"0",description:"Fee charged when subscriber downgrades to a lower-priced service"},{key:"allow_downgrade",label:"Allow Downgrade",type:"toggle",description:"Allow subscribers to change to a lower-priced service"},{key:"downgrade_refund",label:"Refund on Downgrade",type:"toggle",description:"Refund the difference when downgrading (prorate credit)"}],radius:[{key:"daily_quota_reset_time",label:"Daily Quota Reset Time",type:"time",placeholder:"00:00"},{key:"notification_send_time",label:"Notification Send Time",type:"time",placeholder:"08:00",description:"Time to send expiry warning and expired notifications daily"},{key:"default_session_timeout",label:"Default Session Timeout (sec)",type:"number",placeholder:"86400"},{key:"max_sessions_per_user",label:"Max Sessions Per User",type:"number",placeholder:"1"},{key:"accounting_interval",label:"Accounting Interval (sec)",type:"number",placeholder:"300"},{key:"idle_timeout",label:"Idle Timeout (sec)",type:"number",placeholder:"600"},{key:"simultaneous_use",label:"Allow Simultaneous Use",type:"toggle"},{key:"mac_auth_enabled",label:"MAC Authentication",type:"toggle"},{key:"block_on_daily_quota_exceeded",label:"Block Internet on Daily Quota Exceeded",type:"toggle",description:"When enabled, users will lose internet completely when daily quota is exceeded. When disabled, users get reduced FUP speed."},{key:"block_on_monthly_quota_exceeded",label:"Block Internet on Monthly Quota Exceeded",type:"toggle",description:"When enabled, users will lose internet completely when monthly quota is exceeded. When disabled, users get reduced FUP speed."}],notifications:[],security:[{key:"session_timeout",label:"Admin Session Timeout (min)",type:"number",placeholder:"60"},{key:"max_login_attempts",label:"Max Login Attempts",type:"number",placeholder:"5"},{key:"password_min_length",label:"Min Password Length",type:"number",placeholder:"8"},{key:"api_rate_limit",label:"API Rate Limit (req/min)",type:"number",placeholder:"100"},{key:"allowed_ips",label:"Allowed Admin IPs",type:"text",placeholder:"Leave empty for all"},{key:"remote_support_enabled",label:"Remote Support Access",type:"toggle",description:"Allow ProxPanel support team to access your server for troubleshooting. After enabling, run: proxpanel-support enable"}]}[_e])?void 0:ie.map(e=>a.jsxs("div",{className:"textarea"===e.type?"md:col-span-2":"",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e.label}),kt(e)]},e.key))}),"general"===_e&&(()=>{const e=Se.company_name||"ProxPanel",r=window.location.origin,t=(null==Ur?void 0:Ur.running)&&(null==Ur?void 0:Ur.url)?Ur.url:null,s=(e,r)=>{const t=document.querySelector(`#${e} svg`);if(!t)return;const a=(new XMLSerializer).serializeToString(t),s=document.createElement("canvas");s.width=400,s.height=400;const l=s.getContext("2d"),n=new Image;n.onload=()=>{l.fillStyle="#ffffff",l.fillRect(0,0,400,400),l.drawImage(n,0,0,400,400);const e=document.createElement("a");e.download=r,e.href=s.toDataURL("image/png"),e.click()},n.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(a)))},l=(e,r,t)=>{const a=window.open("","_blank","width=400,height=500"),s=document.querySelector(`#${e} svg`);a&&s&&(a.document.write(`<html><head><title>${r}</title></head><body style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;font-family:sans-serif;"><div>${s.outerHTML}</div><p style="margin-top:16px;font-size:14px;color:#666;">Scan with ProxPanel app</p><p style="font-size:12px;color:#999;">${t}</p></body></html>`),a.document.close(),a.focus(),setTimeout(()=>a.print(),300))};return a.jsxs("div",{className:"mt-8 border border-gray-200 dark:border-gray-600 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Mobile App QR Code"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-5",children:"Customers scan this QR code with the ProxPanel mobile app to connect to your panel."}),a.jsxs("div",{className:"grid gap-6 "+(t?"grid-cols-1 md:grid-cols-2":"grid-cols-1"),children:[a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Local Network"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-gray-100 mb-3",children:a.jsx(J,{value:JSON.stringify({server:r,name:e}),size:180,level:"M",includeMargin:!1})}),a.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs text-gray-700 dark:text-gray-300 mb-3 max-w-full truncate",children:r}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mb-3",children:"For customers connected to your local network"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>s("qr-local","proxpanel-local-qr.png"),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md border border-gray-300 dark:border-gray-500 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Download"}),a.jsx("button",{type:"button",onClick:()=>l("qr-local","Local Network QR",r),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md border border-gray-300 dark:border-gray-500 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Print"})]})]}),a.jsx("div",{id:"qr-local",className:"hidden",children:a.jsx(J,{value:JSON.stringify({server:r,name:e}),size:400,level:"M",includeMargin:!0})})]}),t&&a.jsxs("div",{className:"border border-green-200 dark:border-green-700 rounded-lg p-5 bg-green-50/50 dark:bg-green-900/10",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Remote Access"})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-green-100 mb-3",children:a.jsx(J,{value:JSON.stringify({server:t,name:e}),size:180,level:"M",includeMargin:!1})}),a.jsx("code",{className:"bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded text-xs text-green-800 dark:text-green-300 mb-3 max-w-full truncate",children:t}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mb-3",children:"For customers connecting from anywhere via internet"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>s("qr-remote","proxpanel-remote-qr.png"),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md border border-green-300 dark:border-green-600 text-green-700 dark:text-green-300 bg-white dark:bg-green-900/20 hover:bg-green-50 dark:hover:bg-green-900/30",children:"Download"}),a.jsx("button",{type:"button",onClick:()=>l("qr-remote","Remote Access QR",t),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md border border-green-300 dark:border-green-600 text-green-700 dark:text-green-300 bg-white dark:bg-green-900/20 hover:bg-green-50 dark:hover:bg-green-900/30",children:"Print"})]})]}),a.jsx("div",{id:"qr-remote",className:"hidden",children:a.jsx(J,{value:JSON.stringify({server:t,name:e}),size:400,level:"M",includeMargin:!0})})]})]})]})})()]})})]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(null==qr?void 0:qr.length)||0," settings configured â€¢",Pe?" Unsaved changes":" All changes saved"]})})]})}J.displayName="QRCodeSVG";export{X as default};
