import{u as e,j as a}from"./data-vendor-Gi89QHLZ.js";import{r as t}from"./react-vendor-C1B6conR.js";import{t as r,S as d}from"./index-BnwWs3td.js";import"./ui-vendor-Bljr83Cq.js";import"./chart-vendor-C_esy2x0.js";function s(){const[s,l]=t.useState(1),[i,g]=t.useState(""),[n,x]=t.useState(""),[o,c]=t.useState(""),[y,u]=t.useState(""),{data:p,isLoading:m}=e({queryKey:["audit-logs",s,i,n,o,y],queryFn:()=>d.get("/audit",{params:{page:s,action:i,entity_type:n,date_from:o,date_to:y}}).then(e=>e.data)}),{data:h}=e({queryKey:["audit-actions"],queryFn:()=>d.get("/audit/actions").then(e=>e.data.data)}),{data:b}=e({queryKey:["audit-entity-types"],queryFn:()=>d.get("/audit/entity-types").then(e=>e.data.data)});if(m)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const k=(null==p?void 0:p.data)||[],j=(null==p?void 0:p.meta)||{};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Audit Logs"}),a.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("select",{value:i,onChange:e=>{g(e.target.value),l(1)},className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:focus:ring-blue-400",children:[a.jsx("option",{value:"",children:"All Actions"}),(h||[]).map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsxs("select",{value:n,onChange:e=>{x(e.target.value),l(1)},className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:focus:ring-blue-400",children:[a.jsx("option",{value:"",children:"All Entity Types"}),(b||[]).map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsx("input",{type:"date",value:o,onChange:e=>{c(e.target.value),l(1)},className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:focus:ring-blue-400",placeholder:"From Date"}),a.jsx("input",{type:"date",value:y,onChange:e=>{u(e.target.value),l(1)},className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:focus:ring-blue-400",placeholder:"To Date"}),a.jsx("button",{onClick:()=>{g(""),x(""),c(""),u(""),l(1)},className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:bg-gray-600",children:"Clear Filters"})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Timestamp"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Action"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Entity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Description"})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:k.map(e=>{var t,d;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:bg-gray-700",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:r(e.created_at)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.username||(null==(t=e.user)?void 0:t.username)}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["Subscriber","Reseller","Support","Admin"][e.user_type-1]||"Unknown"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d=e.action,{create:"bg-green-100 text-green-800",update:"bg-blue-100 text-blue-800",delete:"bg-red-100 text-red-800",login:"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300",logout:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",renew:"bg-teal-100 text-teal-800",disconnect:"bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-300",transfer:"bg-yellow-100 text-yellow-800"}[d]||"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:e.action})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:[a.jsx("div",{children:e.entity_type}),e.entity_id>0&&a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["ID: ",e.entity_id]})]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:e.description})]},e.id)})})]}),0===k.length&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"No audit logs found"}),j.totalPages>1&&a.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["Page ",s," of ",j.totalPages," (",j.total," total logs)"]}),a.jsxs("div",{className:"space-x-2",children:[a.jsx("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===s,className:"px-3 py-1 bg-gray-200 dark:bg-gray-600 rounded disabled:opacity-50",children:"Previous"}),a.jsx("button",{onClick:()=>l(e=>e+1),disabled:s>=j.totalPages,className:"px-3 py-1 bg-gray-200 dark:bg-gray-600 rounded disabled:opacity-50",children:"Next"})]})]})]})]})}export{s as default};
