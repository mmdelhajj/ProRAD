import{u as e,j as t}from"./data-vendor-Gi89QHLZ.js";import{r as a}from"./react-vendor-C1B6conR.js";import{f as r,S as s}from"./index-BnwWs3td.js";import"./ui-vendor-Bljr83Cq.js";import"./chart-vendor-C_esy2x0.js";function d(){var d;const[x,i]=a.useState("subscribers"),[l,n]=a.useState("month"),{data:g}=e({queryKey:["reports","subscribers"],queryFn:()=>s.get("/reports/subscribers").then(e=>e.data.data)}),{data:c}=e({queryKey:["reports","revenue",l],queryFn:()=>s.get("/reports/revenue",{params:{period:l}}).then(e=>e.data.data)}),{data:y}=e({queryKey:["reports","services"],queryFn:()=>s.get("/reports/services").then(e=>e.data.data)}),{data:m}=e({queryKey:["reports","resellers"],queryFn:()=>s.get("/reports/resellers").then(e=>e.data.data)}),{data:h}=e({queryKey:["reports","expiry"],queryFn:()=>s.get("/reports/expiry",{params:{days:7}}).then(e=>e.data.data)});return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Reports"}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"subscribers",label:"Subscribers"},{id:"revenue",label:"Revenue"},{id:"services",label:"Services"},{id:"resellers",label:"Resellers"},{id:"expiry",label:"Expiry Report"}].map(e=>t.jsx("button",{onClick:()=>i(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(x===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:e.label},e.id))})}),"subscribers"===x&&g&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Total Subscribers"}),t.jsx("p",{className:"text-3xl font-semibold text-gray-900 dark:text-white",children:g.total})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Active"}),t.jsx("p",{className:"text-3xl font-semibold text-green-600 dark:text-green-400",children:g.active})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Expired"}),t.jsx("p",{className:"text-3xl font-semibold text-red-600 dark:text-red-400",children:g.expired})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Online Now"}),t.jsx("p",{className:"text-3xl font-semibold text-blue-600 dark:text-blue-400",children:g.online})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"New This Month"}),t.jsx("p",{className:"text-3xl font-semibold text-gray-900 dark:text-white",children:g.newThisMonth})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Expiring Soon (7 days)"}),t.jsx("p",{className:"text-3xl font-semibold text-orange-600 dark:text-orange-400",children:g.expiringSoon})]})]})]}),"revenue"===x&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex gap-2",children:["day","week","month","year"].map(e=>t.jsx("button",{onClick:()=>n(e),className:"px-4 py-2 rounded-md text-sm "+(l===e?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),c&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Total Revenue"}),t.jsxs("p",{className:"text-3xl font-semibold text-green-600 dark:text-green-400",children:["$",null==(d=c.totalRevenue)?void 0:d.toFixed(2)]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Payments Count"}),t.jsx("p",{className:"text-3xl font-semibold text-gray-900 dark:text-white",children:c.paymentCount})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:"Avg Payment"}),t.jsxs("p",{className:"text-3xl font-semibold text-gray-900 dark:text-white",children:["$",c.paymentCount?(c.totalRevenue/c.paymentCount).toFixed(2):"0.00"]})]})]}),c.byMethod&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Revenue by Method"}),t.jsx("div",{className:"space-y-3",children:c.byMethod.map(e=>{var a;return t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:e.payment_method||"Unknown"}),t.jsxs("span",{className:"font-medium dark:text-white",children:["$",null==(a=e.amount)?void 0:a.toFixed(2)," (",e.count," payments)"]})]},e.payment_method)})})]})]})]}),"services"===x&&y&&t.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Service"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Subscribers"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Revenue"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map(e=>{var a;return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:e.subscriber_count}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["$",null==(a=e.revenue)?void 0:a.toFixed(2)]})]},e.id)})})]})}),"resellers"===x&&m&&t.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Reseller"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Balance"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Total Subscribers"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Active"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(e=>{var a;return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["$",null==(a=e.balance)?void 0:a.toFixed(2)]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:e.subscriber_count}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:e.active_count})]},e.id)})})]})}),"expiry"===x&&h&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[h.total," subscribers expiring in the next 7 days"]}),h.byDay&&t.jsx("div",{className:"grid grid-cols-7 gap-2",children:h.byDay.map(e=>t.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/30 rounded",children:[t.jsx("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:e.count}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:["Day ",e.day]})]},e.day))})]}),h.subscribers&&h.subscribers.length>0&&t.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Username"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Full Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Service"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Expiry Date"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.subscribers.slice(0,20).map(e=>{var a;return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.username}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:e.full_name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:null==(a=e.service)?void 0:a.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 dark:text-gray-500 dark:text-gray-400",children:r(e.expiry_date)})]},e.id)})})]})})]})]})}export{d as default};
